(window["webpackJsonpreact-front-end"]=window["webpackJsonpreact-front-end"]||[]).push([[0],{261:function(e,t,n){e.exports=n.p+"static/media/fast.94fb7985.png"},262:function(e,t,n){e.exports=n.p+"static/media/easy.c3ec87a7.png"},263:function(e,t,n){e.exports=n.p+"static/media/endtoend.84514f60.png"},264:function(e,t,n){e.exports=n.p+"static/media/precise.fcfd05a0.png"},265:function(e,t,n){e.exports=n.p+"static/media/interoperation.2558a942.png"},266:function(e,t,n){e.exports=n.p+"static/media/NSF_Logo.0f6f085b.png"},267:function(e,t,n){e.exports=n.p+"static/media/ub.ac8a9d3e.png"},292:function(e,t,n){e.exports=n.p+"static/media/terms.cdf166b2.txt"},293:function(e,t,n){e.exports=n.p+"static/media/privacy.99e0e744.txt"},328:function(e,t,n){e.exports=n(506)},333:function(e,t,n){},334:function(e,t,n){},498:function(e,t,n){},506:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),s=(n(333),n(17)),l=n(16),c=n(19),d=n(18),u=n(20),m=(n(334),n(590)),p=n(543),f=n(544),h=n(588),g=n(542),y=n(259),b=n.n(y),E=n(605),v={display:"flex",justifyContent:"space-between"},w=("localhost"===window.location.hostname||window.location.hostname,"/api/stork/"),O="googledrive:/",S="ftp://",k="sftp://",C="gsiftp://",j="DropBox",P="GoogleDrive",x={dropbox:j,googledrive:P,ftp:"FTP",sftp:"SFTP",http:"HTTP",gsiftp:"GridFTP",scp:"SCP",https:"HTTP"},T={dropbox:"dropbox:///",googledrive:O,ftp:S,sftp:k,http:"http://",gsiftp:C,scp:"scp://",https:"http://"},D={dropbox:-1,googledrive:-1,ftp:21,sftp:22,http:80,gsiftp:-1,scp:22,https:443},A=7;function I(e){return F(e.uri)}function N(e){return D[e.split(":")[0].toLowerCase()]}function F(e){return T[e.split(":")[0].toLowerCase()]}var B="LOGIN";var L="UPDATE_HASH";var z="PROMOTE";var R="LOGOUT";function U(){return{type:R}}var M="ENDPOINT_PROGRESS";var _="ENDPOINT_LOGOUT";function W(e){return{type:_,side:e}}var V="ENDPOINT_UPDATE";function q(e,t){return{type:V,side:e,endpoint:t}}var H="ACCOUNT_PREFERENCE_TOGGLED";var G=n(23),J=n(11),Y=n.n(J),K=n(25),X=n(251),Q=n.n(X);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var $={id:"left",title:"",path:[],tasks:[],ids:[null],selectedTasks:[]},ee={id:"right",title:"",path:[],tasks:[],ids:[null],selectedTasks:[]},te=null;function ne(e){return"left"===e.side?$.ids.map((function(t,n){return{id:$.ids[n],path:re(e.uri,$.path,n)}})):ee.ids.map((function(t,n){return{id:ee.ids[n],path:re(e.uri,ee.path,n)}}))}function ae(e){return"left"===e.side?$.ids:ee.ids}function re(e,t,n){return 0===n||0===t.length?e:ie(e,t.slice(0,n),"")}function oe(e){te=e}function ie(e,t,n){var a;return a=0===t.length?e:e+("/"===e[e.length-1]?"":"/")+t.reduce((function(e,t){return e+"/"+t})),a+=0===n.length||"/"===a[a.length-1]?n:"/"+n}function se(){return{left:$,right:ee}}function le(e){return se()[e]}function ce(){var e=ui.getState(),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.endpoint1.credential,{},e.endpoint2.credential);return Object.keys(t).map((function(e){return t[e]}))}function de(e,t,n,a){"left"===a.side?($.tasks=e,$.title=a.uri,$.path=t,$.ids=n):(ee.tasks=e,ee.title=a.uri,ee.path=t,ee.ids=n)}function ue(e){return"left"===e.side?$.tasks:ee.tasks}function me(e){e&&(e.left&&($.tasks=e.left.tasks),e.right&&(ee.tasks=e.right.tasks),"left"===e.fromTo[1].id?$.selectedTasks=e.selectedTasks:ee.selectedTasks=e.selectedTasks,di.emit("fileChange",null,null))}function pe(e,t){$.selectedTasks=e,ee.selectedTasks=t,di.emit("fileChange",null,null)}function fe(e){return"left"===e.side?$.selectedTasks:ee.selectedTasks}function he(e,t){"left"===t.side?pe(e,ee.selectedTasks):pe($.selectedTasks,e)}function ge(e){return"left"===e.id?ui.getState().endpoint1:ui.getState().endpoint2}function ye(){return{left:$.selectedTasks,right:ee.selectedTasks}}function be(e){return"left"===e.side?$.selectedTasks.length:ee.selectedTasks.length}function Ee(){return pe([],[]),[]}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=n(352),Se={login:!!Oe.get("email"),admin:!1,email:Oe.get("email")||"noemail",hash:Oe.get("hash")||null,saveOAuthTokens:void 0!==Oe.get("saveOAuthTokens")&&JSON.parse(Oe.get("saveOAuthTokens")),endpoint1:Oe.get("endpoint1")?JSON.parse(Oe.get("endpoint1")):{login:!1,credential:{},uri:"",side:"left"},endpoint2:Oe.get("endpoint2")?JSON.parse(Oe.get("endpoint2")):{login:!1,credential:{},uri:"",side:"right"},queue:[],transferOptions:{useTransferOptimization:"NONE",overwriteExistingFiles:!0,verifyFileInterity:!1,encryptDataChannel:!1,compressDataChannel:!1}};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=Q.a.create({timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}});function Pe(e,t){var n=Math.floor(e.status/100);if(n<3)t(e.data);else if(n<5)t("".concat(e.status," ").concat(e.statusText));else{if("PermissionDenied"===e.name&&ui.getState().login&&window.confirm("You have been logged out. Login again?")&&ui.dispatch(U()),408===e.status||"ECONNABORTED"===e.code)return void t("Timeout 10000ms");t("500")}}function xe(e,t,n){return Te.apply(this,arguments)}function Te(){return(Te=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"user",{action:"verifyEmail",email:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"user",{action:"sendVerificationCode",email:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(K.a)(Y.a.mark((function e(t,n,a,r){var o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a,je.post(w+"user",{action:"verifyCode",email:t,code:n}).then((function(e){200!==e.status&&(o=r),Pe(e,o)})).catch((function(e){Pe(e,r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(K.a)(Y.a.mark((function e(t,n,a,r,o,i){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=o,je.post(w+"user",{action:"setPassword",email:t,code:n,password:a,confirmPassword:r}).then((function(e){200!==e.status&&(s=i),Pe(e,s)})).catch((function(e){Pe(e,i)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return(Ne=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.post(w+"user",{action:"resendVerificationCode",email:t}).then((function(e){return e})).catch((function(e){})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=Object(K.a)(Y.a.mark((function e(t,n,a,r){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.post(w+"user",{action:"setPassword",email:t,code:n,password:a,confirmPassword:r}).then((function(e){if(200!==e.status)throw new Error("Failed to set password for users account");return e})).catch((function(e){return{status:500}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return(Be=Object(K.a)(Y.a.mark((function e(t,n,a,r){var o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a,je.post(w+"user",{action:"login",email:t,password:n}).then((function(e){200!==e.status&&(o=r),Pe(e,o)})).catch((function(e){Pe(e,r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){return(Le=Object(K.a)(Y.a.mark((function e(t,n,a,r){var o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a,je.post(w+"user",{action:"isAdmin",email:t,hash:n}).then((function(e){200!==e.status&&(o=r),Pe(e,o)})).catch((function(e){Pe(e,r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e,t,n,a){return Re.apply(this,arguments)}function Re(){return(Re=Object(K.a)(Y.a.mark((function e(t,n,a,r){var o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a,je.post(w+"user",{action:"history",portNumber:n,uri:encodeURI(t)}).then((function(e){200!==e.status&&(o=r),Pe(e,o)})).catch((function(e){Pe(e,r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t,n){return Me.apply(this,arguments)}function Me(){return(Me=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"globus",{action:"endpointId",globusEndpoint:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"globus",{action:"endpoint",globusEndpoint:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(K.a)(Y.a.mark((function e(t,n,a,r,o){var i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r,je.post(w+"globus",{action:"endpointActivate",globusEndpoint:t,username:n,password:a}).then((function(e){200!==e.status&&(i=o),Pe(e,i)})).catch((function(e){Pe(e,o)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return(Ve=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"user",{action:"deleteHistory",uri:encodeURI(t)}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"globus",{action:"deleteEndpointId",globusEndpoint:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(K.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t,je.get(w+"cred?action=list").then((function(e){200!==e.status&&(a=n),Pe(e,a)})).catch((function(e){Pe(e,n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,n,a,r,o,i){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(K.a)(Y.a.mark((function e(t,n,a,r,o,i,s){var l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=i,je.post(w+"q",{status:t?"all":"userJob",pageNo:n,pageSize:a,sortBy:r,sortOrder:o}).then((function(e){200!==e.status&&(l=s),Pe(e,l)})).catch((function(e){s(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return(Ke=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"ticket",t).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){a(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t,n,a,r,o,i){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(K.a)(Y.a.mark((function e(t,n,a,r,o,i,s){var l,c,d;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=i,c=Object.assign({},t),d=Object.assign({},a),0===Object.keys(c.credential).length&&delete c.credential,0===Object.keys(d.credential).length&&delete d.credential,je.post(w+"submit",{src:Ce({},c,{type:I(c),map:ne(n)}),dest:Ce({},d,{type:I(d),map:ne(r)}),options:o}).then((function(e){200!==e.status&&(l=s),Pe(e,l)})).catch((function(e){Pe(e,s)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t,n,a,r){return $e.apply(this,arguments)}function $e(){return($e=Object(K.a)(Y.a.mark((function e(t,n,a,r,o){var i,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={uri:encodeURI(t),id:a,portNumber:n.portNumber,type:F(t)},i=Object.keys(n.credential).length>0?Ce({},i,{credential:n.credential}):i,s=r,je.post(w+"ls",JSON.stringify(i)).then((function(e){200!==e.status&&(s=o),Pe(e,s)})).catch((function(e){Pe(e,o)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(K.a)(Y.a.mark((function e(t,n,a,r,o){var i,s,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r,s=ae(a),l=s[s.length-1],je.post(w+"mkdir",{credential:a.credential,uri:encodeURI(t),id:l,type:n,map:ne(a)}).then((function(e){200!==e.status&&(i=o),Pe(e,i)})).catch((function(e){Pe(e,o)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return(tt=Object(K.a)(Y.a.mark((function e(t,n,a,r,o){var i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r,je.post(w+"delete",{credential:n.credential,uri:encodeURI(t),id:a,type:F(t),map:ne(n)}).then((function(e){200!==e.status&&(i=o),Pe(e,i)})).catch((function(e){Pe(e,o)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,n){return at.apply(this,arguments)}function at(){return(at=Object(K.a)(Y.a.mark((function e(t,n,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.post(w+"download",{type:F(t),credential:n,uri:encodeURI(t),id:a}).then((function(e){if(200===e.status)return e.data;console.log("Error in download API call")})).catch((function(e){console.log("Error encountered while generating download link")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(){return(rt=Object(K.a)(Y.a.mark((function e(t,n,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt(t,n,a).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(K.a)(Y.a.mark((function e(t,n,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt(t,n,a).then((function(e){""!==e?window.open(e):console.log("Error encountered while generating download link")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(K.a)(Y.a.mark((function e(t,n,a,r){var o,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={credential:n,type:F(t),uri:encodeURI(t),id:""},i=JSON.stringify(o),Oe.set("SFTPAUTH",i,{expires:10}),window.location=w+"download/file";case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t,n,a,r,o,i){return lt.apply(this,arguments)}function lt(){return(lt=Object(K.a)(Y.a.mark((function e(t,n,a,r,o,i,s){var l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=i,je.post(w+"user",{action:t,pageNo:n,pageSize:a,sortBy:r,sortOrder:o}).then((function(e){200!==e.status&&(l=s),Pe(e,l)})).catch((function(e){Pe(e,s)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"user",{action:"getUser",email:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(){return(dt=Object(K.a)(Y.a.mark((function e(t,n,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je.post(w+"user",{action:"updateSaveOAuth",email:t,saveOAuth:n}).then((function(e){200===e.status&&a()})).catch((function(e){console.log("Error encountered while updating the user.")}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return(ut=Object(K.a)(Y.a.mark((function e(t,n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.put(w+"user",{action:"updateAdminRights",email:t,isAdmin:n}).then((function(e){return 200===e.status})).catch((function(e){console.log("Error encountered while updating the user.")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(){return(mt=Object(K.a)(Y.a.mark((function e(t,n,a,r,o){var i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r,je.post(w+"user",{action:"resetPassword",password:t,newPassword:n,confirmPassword:a}).then((function(e){200!==e.status&&(i=o),Pe(e,i)})).catch((function(e){o(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){return(pt=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,fetch(w+"cancel",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({job_id:t})}).then((function(e){e.ok||(r=a),Pe(e,r)})).catch((function(e){a(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(){return(ft=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"user",{action:"deleteCredential",uuid:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(){return(ht=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"restart",{job_id:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,je.post(w+"deleteJob",{job_id:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return bt.apply(this,arguments)}function bt(){return(bt=Object(K.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:St("/api/stork/oauth?type=dropbox");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Et(){return vt.apply(this,arguments)}function vt(){return(vt=Object(K.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:St("/api/stork/oauth?type=googledrive");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(K.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:St("/api/stork/oauth?type=gridftp");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location=t;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){return(Ct=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.post(w+"user",Ce({action:"register"},t)).then((function(e){if(e.data&&e.data.status&&302===e.data.status)return console.log("User already exists"),{status:302};if(200!==e.status)throw new Error("Failed to register user");return e})).catch((function(e){return console.error("Error while registering user"),{status:500}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=Object(K.a)(Y.a.mark((function e(t,n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.post(w+"user",{action:"verifyCode",email:t,code:n}).then((function(e){return e})).catch((function(e){return console.error("Error while verifying the registration code"),{status:500}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(){return(Pt=Object(K.a)(Y.a.mark((function e(t,n,a){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.abrupt("return",je.post(w+"globus",{action:"endpoint_list",filter_fulltext:t}).then((function(e){200!==e.status&&(r=a),Pe(e,r)})).catch((function(e){Pe(e,a)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={login:ui.getState().login,email:ui.getState().email,admin:ui.getState().admin},n.state.login&&function(e,t,n,a){Le.apply(this,arguments)}(ui.getState().email,ui.getState().hash,(function(e){e?ui.dispatch({type:z}):console.log("not admin")}),(function(e){console.log(e)})),n.unsubscribe=ui.subscribe((function(){n.setState({login:ui.getState().login,email:ui.getState().email,admin:ui.getState().admin})})),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(m.a,{inverse:!0,collapseOnSelect:!0,fixedTop:!0,className:"navbar_navbar",id:"navbar"},r.a.createElement(m.a.Header,null,r.a.createElement(m.a.Brand,null,r.a.createElement(g.a,{to:"/"},"OneDataShare")),r.a.createElement(m.a.Toggle,null)),r.a.createElement(m.a.Collapse,null,this.state.login&&r.a.createElement(p.a,null,r.a.createElement(f.a,{componentClass:g.a,href:"/transfer",to:"/transfer"},"Transfer"),r.a.createElement(f.a,{componentClass:g.a,href:"/queue",to:"/queue"},"Queue"),this.state.admin&&r.a.createElement(h.a,{title:"Admin",id:"Navbar Dropdown"},r.a.createElement(f.a,{componentClass:g.a,to:"/clientsInfo",href:"/clientsInfo"},"Clients Information"),r.a.createElement(f.a,{componentClass:g.a,to:"/history",href:"/history"},"History"))),r.a.createElement(p.a,{pullRight:!0},this.state.login&&r.a.createElement(f.a,{componentClass:g.a,to:"/user",href:"/user"},this.state.email),!this.state.login&&r.a.createElement(f.a,{componentClass:g.a,to:"/account",href:"/account"},"Sign in"),!this.state.login&&r.a.createElement(f.a,{componentClass:g.a,to:"/account/register",href:"/account/register"},"Register"),this.state.login&&r.a.createElement(f.a,{onClick:function(){ui.dispatch(U())}},r.a.createElement("span",null,"Log out")),r.a.createElement(f.a,{component:g.a,href:"/support"},r.a.createElement(E.a,{title:"Report an issue",placement:"top"},r.a.createElement(b.a,null))))))}}]),t}(a.Component),Tt=n(268),Dt=n(549),At=n(550),It=n(551),Nt=n(260),Ft=n.n(Nt),Bt=n(261),Lt=n.n(Bt),zt=n(262),Rt=n.n(zt),Ut=n(263),Mt=n.n(Ut),_t=n(264),Wt=n.n(_t),Vt=n(265),qt=n.n(Vt),Ht=n(266),Gt=n.n(Ht),Jt=n(267),Yt=n.n(Jt),Kt=n(190);function Xt(){Kt.a.pageview(window.location.pathname)}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $t={color:"white",fontSize:"1.2em",textAlign:"left"},en=Zt({},$t,{fontWeight:200,fontSize:"4em"}),tn={margin:"8vw"},nn=Zt({},$t,{fontSize:"1.5em"}),an={background:"#579",padding:"8vw",width:"100%",margin:0},rn=Zt({},$t,{fontSize:"2em"}),on=Zt({},$t,{fontSize:"1.1em"});function sn(e){var t=e.style,n=e.onClick;return r.a.createElement("div",{className:"slick-next",style:Zt({},t),onClick:n},r.a.createElement(Tt.a,{glyph:"chevron-right",style:{fontSize:"50px",color:"white"}}))}function ln(e){var t=e.style,n=e.onClick;return r.a.createElement("div",{className:"slick-prev",style:Zt({},t),onClick:n},r.a.createElement(Tt.a,{glyph:"chevron-left",style:{fontSize:"50px",color:"white"}}))}var cn=function(e){function t(){var e;return Object(s.a)(this,t),e=Object(c.a)(this,Object(d.a)(t).call(this)),Xt(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Home"}},{key:"render",value:function(){var e={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,appendDots:function(e){return r.a.createElement("ul",{style:{bottom:"8%",zIndex:1}},e)},nextArrow:r.a.createElement(sn,null),prevArrow:r.a.createElement(ln,null),autoplay:!1,responsive:[{breakpoint:500,settings:{arrows:!1}}]};return r.a.createElement(Dt.a,null,r.a.createElement(Ft.a,e,r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section1"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"OneDataShare\xa0",r.a.createElement("sup",{title:"Beta"},"\u03b2")),r.a.createElement("p",{style:nn},"OneDataShare is a reliable and fast data movement service in the cloud."),r.a.createElement("h4",{style:$t},"We aim to deliver:"),r.a.createElement("ul",{style:$t},r.a.createElement("li",null,"Robust multi-protocol data transfer as a service"),r.a.createElement("li",null,"Remote file browsing in your web browser"),r.a.createElement("li",null,"Advanced transfer optimization algorithms"))))),r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section2"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"Decreased Uncertainty in Real-time Decision-Making Processes."),r.a.createElement("p",{style:nn},"OneDataShare\u2019s data throughput and delivery time prediction service will eliminate possible long delays in completion of a transfer operation and increase utilization of end-system and network resources by giving an opportunity to provision these resources in advance with great accuracy.")))),r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section3"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"Reduced Time to the Delivery of Data"),r.a.createElement("p",{style:nn},"OneDataShare reduces the time to the delivery of data, and drastically increases the end-to-end performance of data-intensive applications relying on remote data sources.")))),r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section4"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"Interoperation Across Heterogeneous Data Resources"),r.a.createElement("p",{style:nn},"OneDataShare provides interoperation across heterogeneous data resources and on-the-fly translation between different data transfer protocols. Sharing data between traditionally non-compatible data sources becomes very easy and convenient with OneDataShare.")))),r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section5"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"Fast, Scalable, and Flexible Data Sharing Made Easy"),r.a.createElement("p",{style:nn},"OneDataShare makes the data readily available to the users and to their applications in the fastest and the most efficient way possible.")))),r.a.createElement("div",null,r.a.createElement(At.a,{className:"homepage_section homepage_section6"},r.a.createElement(Dt.a,{style:tn},r.a.createElement("h1",{style:en},"End-to-end Data Sharing Solution"),r.a.createElement("p",{style:nn},"Anything that requires high-volume data transfer, from real-time weather conditions and natural disasters to sharing genomic maps and real-time consumer behavior analysis, will benefit from OneDataShare."))))),r.a.createElement(It.a,{style:an},r.a.createElement("img",{width:"300px",src:Lt.a,style:{float:"left"},alt:"Fast, Scalable, and Flexible Data Sharing Made Easy"}),r.a.createElement("h3",{style:rn},"Fast, Scalable, and Flexible Data Sharing Made Easy"),r.a.createElement("p",{style:on},"OneDataShare harnesses the power of the cloud and implements state-of-the-art frameworks to optimize data transfer scheduling. It enhances the speed of data transfer via multiple protocols by enabling faster data transfer across the network. OneDataShare utilizes the available bandwidth to the fullest by using many optimization mechanisms, thereby speeding up data transfer and lowering cost.")),r.a.createElement(It.a,{style:an},r.a.createElement("img",{width:"300px",src:Rt.a,style:{float:"left"},alt:"Reduced Time to the Delivery of Data"}),r.a.createElement("h3",{style:rn},"Reduced Time to the Delivery of Data"),r.a.createElement("p",{style:on},"OneDataShare reduces the time to the delivery of data and drastically increases the end-to-end performance of data-intensive applications relying on remote data sources. It provides an end-to-end data transfer architecture which is reliable, fast and effective. The users are capable of reducing the burden of data transfer time through the use of OneDataShare.")),r.a.createElement(It.a,{style:an},r.a.createElement("img",{width:"300px",src:qt.a,style:{float:"left"},alt:"Interoperation Across Heterogeneous Data Resources"}),r.a.createElement("h3",{style:rn},"Interoperation Across Heterogeneous Data Resources"),r.a.createElement("p",{style:on},"By using OneDatashare, users can transfer their data across multiple protocols and platforms without having to worry about protocol translation. OneDataShare takes care of the protocol translation across multiple users ends and it provides a user-friendly field to translate data across multiple instances and ensures effective compatibility and platform independence as data gets transferred from the newest to the oldest protocols and vice versa.")),r.a.createElement(It.a,{style:an},r.a.createElement("img",{width:"300px",src:Wt.a,style:{float:"left"},alt:"Decreased Uncertainty in Real-time Decision-Making Processes"}),r.a.createElement("h3",{style:rn},"Decreased Uncertainty in Real-time Decision-Making Processes."),r.a.createElement("p",{style:on},"Delays over transmission of large data sets are eliminated by using OneDataShare. The desirable data delivery throughput of OneDataShare will alleviate the issue of a long time of data transfer. Hence users will be able to experience faster data deposits across long distances which will, in turn, speed up their other processes regarding usage of the data. Also, it will provide the users with upfront information regarding their data transfers and arrivals, thereby enabling them to prepare in advance for data transfer and scheduling.")),r.a.createElement(It.a,{style:an},r.a.createElement("img",{width:"300px",src:Mt.a,style:{float:"left"},alt:"End-to-end Data Sharing Solution"}),r.a.createElement("h3",{style:rn},"End-to-end Data Sharing Solution"),r.a.createElement("p",{style:on},"OneDataShare is capable of transferring high-volume data of data like real-time weather predictions and conditions and natural disasters to sharing genomic maps and consumer behavior statistics for business intelligence, climate change data or geographic data from any Management Information System (MIS) from anywhere in the world.")),r.a.createElement(It.a,{style:Zt({},an,{backgroundColor:"white"})},r.a.createElement("img",{width:"150px",src:Gt.a,style:{float:"left"},alt:"NSF Logo"}),r.a.createElement("img",{width:"150px",src:Yt.a,style:{float:"left"},alt:"UB Logo"})))}}]),t}(a.Component),dn=n(608),un=n(607),mn=n(601),pn=n(8),fn=n(587),hn=n(552),gn=n(565),yn=n(269),bn=n(569),En=n(53),vn=n(295);function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(){return window.innerWidth<=760}var kn=function(e,t){return On({},e,{tasks:t})},Cn=function(e){var t,n=e.entities,a=e.selectedTasks,r=e.source,o=e.destination;if(r.droppableId===o.droppableId){var i=le(r.droppableId),s=function(e,t,n){var a=Array.from(e),r=a.splice(t,1),o=Object(vn.a)(r,1)[0];return a.splice(n,0,o),a}(i.tasks,r.index,o.index),l=i.tasks[r.index],c=On({},n,Object(G.a)({},i.id,kn(i,s))),d=a[r.droppableId];return 0===d.length&&d.push(l),On({},c,{selectedTasks:d,fromTo:[i,i]})}var u=le(r.droppableId),m=le(o.droppableId),p=u.tasks[r.index],f=Object(En.a)(u.tasks),h=Object(En.a)(m.tasks);h.find((function(e){return e.name===p.name}))||h.splice(o.index,0,p);var g=On({},n,(t={},Object(G.a)(t,u.id,kn(u,f)),Object(G.a)(t,m.id,kn(m,h)),t)),y=a[r.droppableId];return 0===y.length&&y.push(p),On({},g,{selectedTasks:y,fromTo:[u,m]})},jn=function(e,t){return e[Object.keys(e).find((function(n){return e[n].tasks.includes(t)}))]},Pn=function(e,t,n){if(!t.length)return[n];if(null==e)return t;var a=e.tasks.indexOf(n),r=t[t.length-1],o=e.tasks.indexOf(r);if(a===o)return[];var i=a>o,s=i?o:a,l=i?a:o,c=e.tasks.slice(s,l+1).filter((function(e){return!t.includes(e)})),d=i?c:Object(En.a)(c).reverse();return[].concat(Object(En.a)(t),Object(En.a)(d))},xn=function(e){return e.selectedTasks.left.length+e.selectedTasks.right.length>1?Tn(e):Cn(e)},Tn=function(e){var t,n=e.entities,a=e.selectedTasks,r=e.source,o=e.destination,i=le(r.droppableId),s=i.tasks[r.index],l=a[r.droppableId];l.sort((function(e,t){if(e===s)return-1;if(t===s)return 1;var a=jn(n,e).tasks.indexOf(e),r=jn(n,t).tasks.indexOf(t);return a!==r?a-r:-1})),a[o.droppableId]=[];var c=o.index,d=JSON.parse(JSON.stringify(i)),u=Object.keys(n).reduce((function(e,t){var a=n[t].tasks.filter((function(e){return!Boolean(l.find((function(t){return t.name===e.name})))}));return e[t].tasks=a,e}),n),m=u[o.droppableId],p=function(){var e,t=On({},m);return(e=t.tasks).splice.apply(e,[c,0].concat(Object(En.a)(l))),t}(),f=On({},u,(t={},Object(G.a)(t,d.id,d),Object(G.a)(t,m.id,kn(m,p.tasks)),t)),h=On({},n,{},f),g=r.droppableId===o.droppableId?[p,p]:[d,p];return On({},h,{selectedTasks:l,fromTo:g})},Dn=n(96),An=n(135),In=n.n(An),Nn=n(136),Fn=n.n(Nn),Bn=n(273),Ln=n.n(Bn),zn=n(62),Rn=n(97);function Un(){var e=Object(Dn.a)(["\n  left: -","px;\n  top: -","px;\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  height: ","px;\n  width: ","px;\n  line-height: ","px;\n  position: absolute;\n  text-align: center;\n  font-size: 1.8rem;\n"]);return Un=function(){return e},e}function Mn(){var e=Object(Dn.a)(["\n  outline: none;\n  user-select: none;\n  background-color: ",";\n  color: ",",\n  display: flex;\n  flex-direction: column; \n  padding: 5px;\n  "," ","\n"]);return Mn=function(){return e},e}var _n=Rn.a.div(Mn(),(function(e){return Wn(e.isSelected)}),(function(e){return Vn(e.isSelected)}),(function(e){return e.isDragging?"box-shadow: 2px 2px 1px ".concat("#333",";"):""}),(function(e){return e.isGhosting?"opacity: 0.2;":""})),Wn=function(e,t){return t?"#888":e?"#d9edf7":"#ffffff"},Vn=function(e,t){return t?"#888":e?"#31708f":"#333333"},qn={enter:13,escape:27,arrowDown:40,arrowUp:38,tab:9},Hn=Object(Rn.a)("div")(Un(),15,15,"#fff","#337ab7",30,30,30),Gn=0,Jn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).onKeyDown=function(e,t,a){if(t.dragHandleProps&&t.dragHandleProps.onKeyDown(e),!e.defaultPrevented&&!a.isDragging&&e.keyCode===qn.enter){e.preventDefault();var r=e.metaKey||e.ctrlKey,o=e.shiftKey;n.performAction(r,o)}},n.onClick=function(e){if(!e.defaultPrevented&&e.button===Gn){e.preventDefault();var t=e.metaKey||e.ctrlKey,a=e.shiftKey;n.performAction(t,a)}},n.onTouchStart=function(e){n.setState({dragging:!1})},n.onTouchMove=function(e){n.setState({dragging:!0})},n.onTouchEnd=function(e){if(!e.defaultPrevented&&!n.state.dragging)return e.preventDefault(),n.props.toggleSelectionInGroup(n.props.file),!1},n.performAction=function(e,t){var a=n.props,r=a.toggleSelection,o=a.toggleSelectionInGroup,i=a.multiSelectTo;e?o(n.props.file):t?i(n.props.file):r(n.props.file)},n.humanFileSize=n.humanFileSize.bind(Object(pn.a)(n)),n.state={isDragging:!1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.isSelected!==this.props.isSelected||e.isGhosting!==this.props.isGhosting||e.file!==this.props.file}}]),Object(l.a)(t,[{key:"humanFileSize",value:function(e){if(Math.abs(e)<1024)return e+" B";var t=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{e/=1024,++n}while(Math.abs(e)>=1024&&n<t.length-1);return e.toFixed(1)+" "+t[n]}},{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.onDoubleClick,o=t.isSelected,i=t.isGhosting,s=t.endpoint,l=this.props.file,c=l.name,d=l.dir,u=l.perm,m=l.time,p=l.size,f=0!==m||u||0!==p,h={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},g=new Date(1e3*m);return r.a.createElement(zn.b,{draggableId:s.side+" "+JSON.stringify(this.props.file),index:n},(function(t,n){var l=be(s),y=n.isDragging&&l>1;return r.a.createElement(_n,Object.assign({onDoubleClick:function(){d&&a(e.props.file.name,e.props.file.id)}},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,onClick:e.onClick,onTouchEnd:function(t){e.onTouchEnd(t)},onTouchStart:function(t){e.onTouchStart(t)},onTouchMove:function(t){e.onTouchMove(t)},onKeyDown:function(a){return e.onKeyDown(a,t,n)},isSelected:o,isGhosting:y&&i}),r.a.createElement("div",{style:{display:"flex",flexGrow:1,flexDirection:"row",justifyContent:"flex-start"}},d&&r.a.createElement(In.a,null),!d&&r.a.createElement(Fn.a,null),r.a.createElement("p",{style:{marginLeft:"10px",flexGrow:1,textAlign:"left"}}," ",c," "),d&&Sn()&&r.a.createElement(hn.a,{style:{width:"40px",float:"right"},onTouchStart:function(){a(e.props.file.name)}},r.a.createElement(Ln.a,null))),y&&r.a.createElement(Hn,null,l),f&&r.a.createElement("div",{style:{display:"flex",flexGrow:1,flexDirection:"row",justifyContent:"space-between"}},0!==m&&r.a.createElement("p",{style:{fontSize:"10px",color:"#444"}},new Intl.DateTimeFormat("en-US",h).format(g)," "),u&&r.a.createElement("p",null," ",u," "),0!==p&&r.a.createElement("p",{style:{fontSize:"10px",color:"#444"}}," ",e.humanFileSize(p)," ")))}))}}]),t}(a.Component);function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xn(){var e=Object(Dn.a)(["\n  left: -","px;\n  top: -","px;\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  height: ","px;\n  width: ","px;\n  line-height: ","px;\n  position: absolute;\n  text-align: center;\n  font-size: 1.8rem;\n"]);return Xn=function(){return e},e}function Qn(){var e=Object(Dn.a)(["\n  outline: none;\n  user-select: none;\n  background-color: ",";\n  color: ",",\n  display: inline;\n  white-space: nowrap;\n  "," ","\n"]);return Qn=function(){return e},e}var Zn=Rn.a.tr(Qn(),(function(e){return $n(e.isSelected)}),(function(e){return ea(e.isSelected)}),(function(e){return e.isDragging?"box-shadow: 2px 2px 1px ".concat("#333",";"):""}),(function(e){return e.isGhosting?"opacity: 0.2;":""})),$n=function(e,t){return t?"#888":e?"#d9edf7":"#ffffff"},ea=function(e,t){return t?"#888":e?"#31708f":"#333333"},ta={enter:13,escape:27,arrowDown:40,arrowUp:38,tab:9},na=Object(Rn.a)("div")(Xn(),15,15,"#fff","#337ab7",30,30,30),aa=0,ra=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).onKeyDown=function(e,t,a){if(t.dragHandleProps&&t.dragHandleProps.onKeyDown(e),!e.defaultPrevented&&!a.isDragging&&e.keyCode===ta.enter){e.preventDefault();var r=e.metaKey||e.ctrlKey,o=e.shiftKey;n.performAction(r,o)}},n.onClick=function(e){if(!e.defaultPrevented&&e.button===aa){e.preventDefault();var t=e.metaKey||e.ctrlKey,a=e.shiftKey;n.performAction(t,a)}},n.onTouchStart=function(e){n.setState({dragging:!1})},n.onTouchMove=function(e){n.setState({dragging:!0})},n.onTouchEnd=function(e){if(!e.defaultPrevented&&!n.state.dragging)return e.preventDefault(),n.props.toggleSelectionInGroup(n.props.file),!1},n.performAction=function(e,t){var a=n.props,r=a.toggleSelection,o=a.toggleSelectionInGroup,i=a.multiSelectTo;e?o(n.props.file):t?i(n.props.file):r(n.props.file)},n.humanFileSize=n.humanFileSize.bind(Object(pn.a)(n)),n.state={isDragging:!1},n.arraysEqual=n.arraysEqual.bind(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"arraysEqual",value:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"shouldComponentUpdate",value:function(e,t){return!this.arraysEqual(e.columns,this.props.columns)||e.posit0!==this.props.posit0||e.posit1!==this.props.posit1||e.posit2!==this.props.posit2||e.posit3!==this.props.posit3||e.isSelected!==this.props.isSelected||e.isGhosting!==this.props.isGhosting||e.file!==this.props.file}}]),Object(l.a)(t,[{key:"humanFileSize",value:function(e){if(Math.abs(e)<1024)return e+" B";var t=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{e/=1024,++n}while(Math.abs(e)>=1024&&n<t.length-1);return e.toFixed(1)+" "+t[n]}},{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.onDoubleClick,o=t.isSelected,i=t.isGhosting,s=t.endpoint,l=t.posit0,c=t.posit1,d=t.posit2,u=t.posit3,m=t.columns,p=this.props.file,f=p.name,h=p.dir,g=p.perm,y=p.time,b=p.size,E={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},v=new Date(1e3*y),w={textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",marginLeft:"10px",textAlign:"left",display:"inline-block"};return r.a.createElement(zn.b,{draggableId:s.side+" "+JSON.stringify(this.props.file),index:n},(function(t,n){var p=be(s),O=n.isDragging&&p>1;return r.a.createElement(Zn,Object.assign({onDoubleClick:function(){h&&a(e.props.file.name,e.props.file.id)}},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,width:"100px",onClick:e.onClick,onTouchEnd:function(t){e.onTouchEnd(t)},onTouchStart:function(t){e.onTouchStart(t)},onTouchMove:function(t){e.onTouchMove(t)},onKeyDown:function(a){return e.onKeyDown(a,t,n)},isSelected:o,isGhosting:O&&i}),O&&r.a.createElement(na,null,p),m[0]&&r.a.createElement("td",{style:{float:"left",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},h&&r.a.createElement(In.a,{style:{width:40}}),!h&&r.a.createElement(Fn.a,{style:{width:40}}),r.a.createElement("p",{style:Kn({},w,{width:l-40,minWidth:"50"})}," ",f," ")),m[1]&&r.a.createElement("td",{style:{borderLeft:"1px solid lightgray",whiteSpace:"nowrap",overflow:"hidden"}},r.a.createElement("p",{style:Kn({},w,{width:c})},0===y?"Not Available":new Intl.DateTimeFormat("en-US",E).format(v))),m[2]&&r.a.createElement("td",{style:{borderLeft:"1px solid lightgray",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},r.a.createElement("p",{style:Kn({},w,{width:d})}," ",g||"N/A"," ")),m[3]&&r.a.createElement("td",{style:{borderLeft:"1px solid lightgray",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},r.a.createElement("p",{style:Kn({},w,{width:u})}," ",0===b?"N/A":e.humanFileSize(b)," ")))}))}}]),t}(a.Component),oa=n(296),ia=n(554),sa=n(150),la=n.n(sa),ca=n(603);function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleRequestSort=function(e){var t=e,a="desc";n.state.orderBy===e&&"desc"===n.state.order&&(a="asc"),n.setState({order:a,orderBy:t}),n.queueFunc()},n.generateResizer=function(e){return r.a.createElement("div",{style:{top:0,right:0,width:"3px",position:"absolute",cursor:"col-resize",backgroundColor:"#00000000",userSelect:"none",height:"100%"},onMouseDown:function(t){n.pageX=t.pageX,n.target=e;var a=document.getElementById("browser"+n.props.endpoint.side).getBoundingClientRect();n.setState({showBar:e+1,leftPosition:t.clientX-a.left})}})},n.onMouseMove=function(e){var t=document.getElementById("browser"+n.props.endpoint.side).getBoundingClientRect();if(void 0!==n.target){var a=n.state.headerCompactStylePos;a[n.target]+=e.pageX-n.pageX,a[n.target]<70&&(a[n.target]=70),n.pageX=e.pageX;var r=e.clientX-t.left;n.setState({headerCompactStylePos:a,leftPosition:r})}},n.handleClose=function(e){e.preventDefault(),n.setState({anchorEl:null})},n.onMouseUp=function(e){n.setState({compactStylePos:n.state.headerCompactStylePos.slice(),showBar:null}),n.pageX=void 0,n.target=void 0},n.flippingChange=function(e){return"Asc"===e?"Desc":"Asc"},n.handleRequestSort=function(e){return function(){var t=n.state,a=t.orderBy,r=t.columnsOrder;a!==e?a=e:r[a]=n.flippingChange(r[a]),n.props.sortBy(n.props.sortFunctions[a][r[a]]),n.setState({orderBy:a,columnsOrder:r})}},n.state={headerCompactStylePos:[100,150,70,70],compactStylePos:[100,150,70,70],columns:[!0,!0,!0,!0],orderBy:-1,columnsOrder:["Desc","Desc","Desc","Desc"],leftPosition:0,showBar:null},n.generateResizer=n.generateResizer.bind(Object(pn.a)(n)),n.contextMenu=n.contextMenu.bind(Object(pn.a)(n)),n.handleClose=n.handleClose.bind(Object(pn.a)(n)),n.CompactTable=r.a.createRef(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.headerCompactStylePos,t=e.reduce((function(e,t){return e+t}),0),n=this.CompactTable.current.offsetWidth/t,a=e.map((function(e){return e*n}));e=a.map((function(e){return e<70?70:e})),this.setState({headerCompactStylePos:e,compactStylePos:e}),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"contextMenu",value:function(e){return e.preventDefault(),this.setState({anchorEl:e.currentTarget}),this.offset=e.pageX-this.refs.CompactHeader.getBoundingClientRect().left,!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.displayList,a=t.list,o=t.selectedTasks,i=t.endpoint,s=t.draggingTask,l=t.toggleSelection,c=t.toggleSelectionInGroup,d=t.multiSelectTo,u=t.onClick,m=t.onDoubleClick,p=this.state,f=p.compactStylePos,h=p.headerCompactStylePos,g=p.anchorEl,y=p.columns,b=p.leftPosition,E=p.showBar,v=p.orderBy,w=p.columnsOrder,O=["File Name","Date","Permission","Size"],S=[0,1,2,3].filter((function(e){return y[e]})),k={textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",marginLeft:"10px",textAlign:"left",display:"inline-block"},C=function(t){return function(){var n=y.slice();n[t]=!n[t],e.setState({columns:n})}},j=S.map((function(t){return r.a.createElement("th",{style:{borderLeft:"1px solid darkgray",borderBottom:"1px solid gray",height:"10px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"visible",position:"relative"}},r.a.createElement(ca.a,{style:ua({},k,{width:h[t]}),active:v===t,direction:w[t],onClick:e.handleRequestSort(t)},O[t]),e.generateResizer(t))}));return r.a.createElement("div",{ref:this.CompactTable},r.a.createElement("table",{id:"tableHeader"+this.props.endpoint.side},r.a.createElement("thead",{style:{boxShadow:"0px 0px 5px #aaaaaa",overflow:"visible"},onContextMenu:this.contextMenu,ref:"CompactHeader"},r.a.createElement("tr",null,E&&r.a.createElement("div",{style:{borderLeft:"1px solid black",height:"270px",position:"absolute",left:b+17+"px"}}),j))),r.a.createElement(oa.a,{id:"simple-menu",anchorEl:g,open:Boolean(g),onClose:this.handleClose,style:{width:"200px",left:this.offset+"px",top:"50px"},onContextMenu:this.handleClose},r.a.createElement(ia.a,{onClick:C(1)},y[1]&&r.a.createElement(la.a,null),"Date"),r.a.createElement(ia.a,{onClick:C(2)},y[2]&&r.a.createElement(la.a,null),"Permission"),r.a.createElement(ia.a,{onClick:C(3)},y[3]&&r.a.createElement(la.a,null),"File Size")),r.a.createElement("table",null,r.a.createElement("tbody",null,n.map((function(e,t){var n=a[e],p=Boolean(-1!==o.indexOf(n)),h=p&&Boolean(s)&&s.name!==n.name;return r.a.createElement(ra,{posit0:f[0],posit1:f[1],posit2:f[2],posit3:f[3],key:e,index:t,file:n,columns:y.slice(),selectionCount:o.length,onClick:u,onDoubleClick:m,side:i.side,isSelected:p,endpoint:i,isGhosting:h,toggleSelection:l,toggleSelectionInGroup:c,multiSelectTo:d})})))))}}]),t}(a.Component),pa=n(281),fa=n.n(pa),ha=n(282),ga=n.n(ha),ya=n(279),ba=n.n(ya),Ea=n(280),va=n.n(Ea),wa=n(283),Oa=n.n(wa),Sa=n(139),ka=n.n(Sa),Ca=n(595),ja=n(602),Pa=n(250),xa=n(599),Ta=n(563),Da=n(557),Aa=n(558),Ia=n(556),Na=n(274),Fa=n.n(Na),Ba=n(275),La=n.n(Ba),za=n(276),Ra=n.n(za),Ua=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.directoryPath!==this.props.directoryPath||e.endpoint!==this.props.endpoint}},{key:"render",value:function(){var e=this.props,t=e.endpoint,n=e.directoryPath,a=e.lastestId,o=new Fa.a({debug:!0,options:{chunking:{enabled:!0,partSize:5e5,concurrent:{enabled:!1}},request:{endpoint:"/api/stork/upload",params:{directoryPath:encodeURI(ie(t.uri,n,"")),credential:JSON.stringify(t.credential),id:a,map:JSON.stringify(ne(t))}},retry:{enableAuto:!0},callbacks:{onError:function(e,t,n,a){console.log("error occurred - "+n)},onStatusChange:function(e,t,n){"submitted"===n&&di.emit("messageOccured","Upload Task has been submitted"),"upload successful"===n&&di.emit("messageOccured","Uploading succeed!")}}}});return r.a.createElement(La.a,{uploader:o,style:{flexGrow:1,padding:"5px"}},r.a.createElement(Ra.a,{style:{fontSize:"15px",width:"100%"}}))}}]),t}(a.Component),Ma=n(555),_a=n(604),Wa=n(256),Va=n(596),qa=n(129),Ha=n(277),Ga=function(e){function t(e){var n,a;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).toggleSelection=function(e){var t=n.props.endpoint,a=fe(t);he(a.includes(e)?a.length>1?[e]:[]:[e],t)},n.toggleSelectionInGroup=function(e){var t=n.props.endpoint,a=fe(t),r=a.indexOf(e);if(-1!==r){var o=Object(En.a)(a);o.splice(r,1),he(o,t)}else he([].concat(Object(En.a)(a),[e]),t)},n.multiSelectTo=function(e){var t=n.props.endpoint,a=Pn(se()[t.side],fe(t),e);null!=a&&he(a,t)},n.unselectAll=function(){Ee()},n.onWindowKeyDown=function(e){e.defaultPrevented||"Escape"===e.key&&n.unselectAll()},n.onWindowClick=function(e){e.defaultPrevented},n.onWindowTouchEnd=function(e){e.defaultPrevented},n.filenameAscendingOrderSort=function(e){return e.sort((function(e,t){return e.dir&&!t.dir?-1:!e.dir&&t.dir?1:e.name.localeCompare(t.name)}))},n.filenameDescendingOrderSort=function(e){return e.sort((function(e,t){return e.dir&&!t.dir?-1:!e.dir&&t.dir?1:t.name.localeCompare(e.name)}))},n.permissionAscendingOrderSort=function(e){return e.sort((function(e,t){return e.perm&&t.perm?e.perm.localeCompare(t.perm):0}))},n.permissionDescendingOrderSort=function(e){return e.sort((function(e,t){return e.perm&&t.perm?t.perm.localeCompare(e.perm):0}))},n.sortBy=function(e){var t=n.props.endpoint,a=n.state,r=a.directoryPath,o=a.ids;de(e(ue(t)),r,o,t),n.setState({directoryPath:r,ids:o})},n.handleClickOpen=function(e){n.setState({openShare:!0,shareUrl:e})},n.handleClickOpenAddFolder=function(){n.setState({openAFolder:!0})},n.handleClose=function(){n.setState({openShare:!1,openAFolder:!1})},n.handleCloseWithFolderAdded=function(){var e=n.props,t=e.endpoint,a=e.setLoading,r=n.state,o=r.directoryPath,i=r.addFolderName,s=r.ids;n.setState({openShare:!1,openAFolder:!1});var l=ie(t.uri,o,i),c=I(t);I(t)===O&&(l=i),function(e,t,n,a,r){et.apply(this,arguments)}(l,c,t,(function(e){a(!0),n.getFilesFromBackendWithPath(t,o,s)}),(function(e){n._handleError(e)}))},n._handleError=function(e){di.emit("errorOccured",e)},n._handleConfirmation=function(e){return window.confirm(e)},n._handleAddFolderTextFieldChange=function(e){n.setState({addFolderName:e.target.value})},n.handleCloseWithFileDeleted=function(e){var t=n.props,a=t.endpoint,r=t.setLoading,o=n.state,i=o.directoryPath,s=o.ids,l=e.length,c=0;n._handleConfirmation("Are you sure you want to delete"+e.reduce((function(e,t){return e+"\n"+t.name}),""))&&(r(!0),e.map((function(e){var t=ie(a.uri,i,e.name);console.log("delete before success",i,s),function(e,t,n,a,r){tt.apply(this,arguments)}(t,a,e.id,(function(e){console.log("delete after success",i,s),++c===l&&n.getFilesFromBackendWithPath(a,i,s)}),(function(e){n._handleError(e)}))})))},n.state={route:"",directoryPath:(a=e.endpoint,"left"===a.side?$.path:ee.path),ids:ae(e.endpoint),openShare:!1,shareUrl:"",openAFolder:!1,addFolderName:"",searchText:"",ignoreCase:!1,regex:!1},n.getFilesFromBackend=n.getFilesFromBackend.bind(Object(pn.a)(n)),n.fileNodeDoubleClicked=n.fileNodeDoubleClicked.bind(Object(pn.a)(n)),n.getFilesFromBackendWithPath=n.getFilesFromBackendWithPath.bind(Object(pn.a)(n)),n.breadcrumbClicked=n.breadcrumbClicked.bind(Object(pn.a)(n)),n.toggleSelection=n.toggleSelection.bind(Object(pn.a)(n)),n.toggleSelectionInGroup=n.toggleSelectionInGroup.bind(Object(pn.a)(n)),n.multiSelectTo=n.multiSelectTo.bind(Object(pn.a)(n)),n.onWindowTouchEnd=n.onWindowTouchEnd.bind(Object(pn.a)(n)),n.onWindowKeyDown=n.onWindowKeyDown.bind(Object(pn.a)(n)),n.onWindowClick=n.onWindowClick.bind(Object(pn.a)(n)),n.fileChangeHandler=n.fileChangeHandler.bind(Object(pn.a)(n)),n._handleAddFolderTextFieldChange=n._handleAddFolderTextFieldChange.bind(Object(pn.a)(n)),n.filenameAscendingOrderSort=n.filenameAscendingOrderSort.bind(Object(pn.a)(n)),n.sizeAscendingOrderSort=n.sizeAscendingOrderSort.bind(Object(pn.a)(n)),n.dateAscendingOrderSort=n.dateAscendingOrderSort.bind(Object(pn.a)(n)),n.permissionAscendingOrderSort=n.permissionAscendingOrderSort.bind(Object(pn.a)(n)),n.filenameDescendingOrderSort=n.filenameDescendingOrderSort.bind(Object(pn.a)(n)),n.sizeDescendingOrderSort=n.sizeDescendingOrderSort.bind(Object(pn.a)(n)),n.dateDescendingOrderSort=n.dateDescendingOrderSort.bind(Object(pn.a)(n)),n.permissionDescendingOrderSort=n.permissionDescendingOrderSort.bind(Object(pn.a)(n)),n.sortBy=n.sortBy.bind(Object(pn.a)(n)),0===n.state.directoryPath.length&&n.getFilesFromBackend(e.endpoint),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.onWindowClick),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("touchend",this.onWindowTouchEnd),di.on("fileChange",this.fileChangeHandler)}},{key:"fileChangeHandler",value:function(){this.forceUpdate()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.onWindowClick),window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("touchend",this.onWindowTouchEnd),this.unselectAll()}},{key:"fileNodeDoubleClicked",value:function(e,t){this.props.setLoading(!0),this.getFilesFromBackendWithPath(this.props.endpoint,[].concat(Object(En.a)(this.state.directoryPath),[e]),[].concat(Object(En.a)(this.state.ids),[t])),this.unselectAll()}},{key:"breadcrumbClicked",value:function(e){this.props.setLoading(!0),this.state.directoryPath.length=e,this.state.ids.length=e+1,this.getFilesFromBackendWithPath(this.props.endpoint,this.state.directoryPath,this.state.ids)}},{key:"getFilesFromBackend",value:function(e){this.getFilesFromBackendWithPath(e,[],[null])}},{key:"dateAscendingOrderSort",value:function(e){return e.sort((function(e,t){return e.time-t.time}))}},{key:"dateDescendingOrderSort",value:function(e){return e.sort((function(e,t){return t.time-e.time}))}},{key:"sizeAscendingOrderSort",value:function(e){return e.sort((function(e,t){return e.size-t.size}))}},{key:"sizeDescendingOrderSort",value:function(e){return e.sort((function(e,t){return t.size-e.size}))}},{key:"getFilesFromBackendWithPath",value:function(e,t,n){var a=this,r=e.uri,o=this.props.setLoading;o(!0),Ze(r=ie(r,t,""),e,n[n.length-1],(function(r){de(a.filenameAscendingOrderSort(r.files),t,n,e),a.setState({directoryPath:t,ids:n}),o(!1)}),(function(e){a._handleError(e),o(!1)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.endpoint,a=t.back,o=t.setLoading,i=t.getLoading,s=t.displayStyle,l=this.state,c=l.directoryPath,d=l.searchText,u=ue(n)||[],m=Object.keys(u);if(d.length>0)if(this.state.regex){var p=this.state.ignoreCase?"i":"";try{var f=new RegExp(d,p);m=Object.keys(u).filter((function(e){return f.test(u[e].name)}))}catch(w){console.log("Invalid regex")}}else if(this.state.ignoreCase){var h=d.toLowerCase();m=Object.keys(u).filter((function(e){return u[e].name.toLowerCase().includes(h)}))}else m=Object.keys(u).filter((function(e){return u[e].name.includes(d)}));var g={fontSize:"15px",width:"100%"},y={flexGrow:1,padding:"5px"},b=fe(n),E=i(),v=function(e){return r.a.createElement(Ma.a,{id:"tooltip"},e)};return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:"100%",maxHeight:"400px"}},r.a.createElement(xa.a,{open:this.state.openShare,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ia.a,{id:"form-dialog-title"},"Share"),r.a.createElement(Da.a,{style:{width:"100%"}},r.a.createElement(Aa.a,null,"Share this URL to allow others access to the selected file:"),r.a.createElement("div",{style:{width:"96%",float:"left"}},r.a.createElement(Pa.a,{autoFocus:!0,id:"name",disabled:!0,value:this.state.shareUrl,fullWidth:!0})),r.a.createElement(Ha.CopyToClipboard,{text:this.state.shareUrl,style:{float:"right",width:"3%"}},r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})))),r.a.createElement(Ta.a,null,r.a.createElement(hn.a,{onClick:this.handleClose,color:"primary"},"Close"))),r.a.createElement(xa.a,{open:this.state.openAFolder,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ia.a,{id:"form-dialog-title"},"Add folder"),r.a.createElement(Da.a,null,r.a.createElement(Pa.a,{autoFocus:!0,id:"name",label:"name",onChange:this._handleAddFolderTextFieldChange,fullWidth:!0})),r.a.createElement(Ta.a,null,r.a.createElement(hn.a,{onClick:this.handleCloseWithFolderAdded,color:"primary"},"Add"))),r.a.createElement("div",{style:{display:"flex",alighSelf:"stretch",height:"60px",backgroundColor:"#d9edf7",width:"100%",overflowX:"scroll",overflowY:"hidden"}},r.a.createElement(_a.a,{style:{float:"left",backgroundColor:"#d9edf7",whiteSpace:"nowrap"}},r.a.createElement(_a.a.Item,{key:n.uri,style:{display:"inline-block"}},r.a.createElement(hn.a,{style:{padding:"0px",margin:"0px"},onClick:function(){return e.breadcrumbClicked(0)}},n.uri)),c.map((function(t,n){return r.a.createElement(_a.a.Item,{key:t+n,style:{display:"inline-block"}},r.a.createElement(hn.a,{style:{padding:"0px",margin:"0px"},onClick:function(){return e.breadcrumbClicked(n+1)}},t))})))),r.a.createElement("div",{style:{alignSelf:"stretch",display:"flex",flexDirection:"row",alignItems:"center",height:"40px",padding:"10px",backgroundColor:"#d9edf7"}},r.a.createElement(Wa.a,{style:{display:"flex",flexDirection:"row",flexGrow:2}},r.a.createElement(Va.a,{placement:"top",overlay:v("Download")},r.a.createElement(qa.a,{disabled:1!==fe(n).length||fe(n)[0].dir,onClick:function(){var e=ie(n.uri,c,fe(n)[0].name),t=fe(n);I(n)===k||"scp://"===I(n)?function(e,t,n,a){it.apply(this,arguments)}(e,n.credential,t):"http://"===I(n)?window.open(e):function(e,t,n){ot.apply(this,arguments)}(e,n.credential,t[0].id)},style:y},r.a.createElement(ba.a,{style:g}))),r.a.createElement(Va.a,{placement:"top",overlay:v("Upload")},r.a.createElement(qa.a,null,r.a.createElement(Ua,{endpoint:n,directoryPath:c,lastestId:this.state.ids[this.state.ids.length-1]}))),r.a.createElement(Va.a,{placement:"top",overlay:v("Share")},r.a.createElement(qa.a,{disabled:1!==fe(n).length||fe(n)[0].dir||!(I(n)===O||"dropbox:///"===I(n)),style:y,onClick:function(){var t=ie(n.uri,c,fe(n)[0].name),a=fe(n);(function(e,t,n){return rt.apply(this,arguments)})(t,n.credential,a[0].id).then((function(t){""!==t?e.handleClickOpen(t):di.emit("errorOccured","Error encountered while generating link")}))}},r.a.createElement(va.a,{style:g}))),r.a.createElement(Va.a,{placement:"top",overlay:v("New Folder")},r.a.createElement(qa.a,{style:y,onClick:function(){e.handleClickOpenAddFolder()}},r.a.createElement(fa.a,{style:g}))),r.a.createElement(Va.a,{placement:"top",overlay:v("Delete")},r.a.createElement(qa.a,{disabled:fe(n).length<1,onClick:function(){e.handleCloseWithFileDeleted(fe(n))},style:y},r.a.createElement(ga.a,{style:g}))),r.a.createElement(Va.a,{placement:"top",overlay:v("Refresh")},r.a.createElement(qa.a,{style:y,onClick:function(){o(!0),e.getFilesFromBackendWithPath(n,c,e.state.ids)}},r.a.createElement(ka.a,{style:g}))),r.a.createElement(Va.a,{placement:"top",overlay:v("Log out")},r.a.createElement(qa.a,{bsStyle:"primary",style:y,onClick:function(){!function(e){"left"===e.side?$={id:"left",title:"",path:[],tasks:[],ids:[null],previousTasks:[],selectedTasks:[]}:ee={id:"right",title:"",path:[],tasks:[],ids:[null],previousTasks:[],selectedTasks:[]}}(n),e.unselectAll(),a()}},r.a.createElement(Oa.a,{style:g}))))),r.a.createElement("div",{style:{alignSelf:"stretch",display:"flex",flexDirection:"row",alignItems:"center",height:"40px",padding:"10px",backgroundColor:"#d9edf7"}},r.a.createElement(Ca.a,{style:{padding:"4px",marginLeft:4,flex:1,background:"#d9edf7",borderRadius:"5px"}},r.a.createElement(ja.a,{placeholder:"Search",onChange:function(t){e.setState({searchText:t.target.value})}}),r.a.createElement(Ca.a.Button,null,r.a.createElement(Va.a,{placement:"top",overlay:v("Ignore Case")},r.a.createElement(hn.a,{id:"ignoreCase",style:{color:this.state.ignoreCase?"white":"black",backgroundColor:this.state.ignoreCase?"#337AB6":"white",border:"1px solid #ccc",textTransform:"capitalize",fontFamily:"monospace",fontSize:"10px",minWidth:"17px"},onClick:function(){e.setState({ignoreCase:!e.state.ignoreCase})}},"Aa")),r.a.createElement(Va.a,{placement:"top",overlay:v("Regular Expression")},r.a.createElement(hn.a,{id:"regex",style:{color:this.state.regex?"white":"black",backgroundColor:this.state.regex?"#337AB6":"white",border:"1px solid #ccc",fontSize:"10px",minWidth:"17px"},onClick:function(){e.setState({regex:!e.state.regex})}},r.a.createElement("b",null,"*.")))))),r.a.createElement(zn.c,{droppableId:n.side},(function(t,a){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps,{style:{overflowY:"scroll",width:"100%",marginTop:"0px",height:"320px"}}),!E&&0===Object.keys(u).length&&r.a.createElement("h2",null,"This directory is EMPTY"),E&&0===Object.keys(u).length&&r.a.createElement("h2",null,"LOADING"),!E&&0===m.length&&Object.keys(u).length>0&&r.a.createElement("h2",null,"No Search Result"),"compact"===s&&!E&&0!==m.length&&r.a.createElement(ma,{sortFunctions:[{Asc:e.filenameAscendingOrderSort,Desc:e.filenameDescendingOrderSort},{Asc:e.dateAscendingOrderSort,Desc:e.dateDescendingOrderSort},{Asc:e.permissionAscendingOrderSort,Desc:e.permissionDescendingOrderSort},{Asc:e.sizeAscendingOrderSort,Desc:e.sizeDescendingOrderSort}],sortBy:e.sortBy,list:u,displayList:m,selectedTasks:b,endpoint:n,draggingTask:te,toggleSelection:e.toggleSelection,onClick:e.fileNodeClicked,onDoubleClick:e.fileNodeDoubleClicked,toggleSelectionInGroup:e.toggleSelectionInGroup,multiSelectTo:e.multiSelectTo}),"comfort"===s&&m.map((function(t,a){var o=u[t],i=Boolean(-1!==b.indexOf(o)),s=i&&Boolean(te)&&te.name!==o.name;return r.a.createElement(Jn,{key:t,index:a,file:o,selectionCount:b.length,onClick:e.fileNodeClicked,onDoubleClick:e.fileNodeDoubleClicked,side:n.side,isSelected:i,endpoint:n,isGhosting:s,toggleSelection:e.toggleSelection,toggleSelectionInGroup:e.toggleSelectionInGroup,multiSelectTo:e.multiSelectTo})})),t.placeHolder)})))}}]),t}(a.Component),Ja=n(553),Ya=n(510),Ka=n(566),Xa=n(564),Qa=n(568),Za=n(110),$a=n.n(Za),er=n(98),tr=n.n(er),nr=n(285),ar=n.n(nr),rr=n(594),or=n(300),ir=n(302),sr=n(511),lr=n(284),cr=n.n(lr),dr={root:{padding:"2px 4px",display:"flex",alignItems:"center",paddingLeft:10,paddingRight:10},input:{marginLeft:8,flex:1,width:"90%"},iconButton:{padding:10},divider:{width:1,height:28,margin:4}},ur=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={search_text:"",data:[],loading:!1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getEndpointListAsData",value:function(){var e=this,t=this.state.search_text;this.setState({loading:!0}),""!==t?function(e,t,n){Pt.apply(this,arguments)}(t,(function(t){e.setState({data:t.DATA}),e.setState({loading:!1})}),(function(t){di.emit("errorOccured",t),e.setState({loading:!1})})):di.emit("errorOccured","Search Text should not be empty.")}},{key:"render",value:function(){var e=this,t=this.state,n=t.search_text,a=t.loading,o=t.data,i=o.map((function(t){return r.a.createElement(Ya.a,{button:!0,key:t.canonical_name,style:{background:"white",height:40},onClick:function(){Ue(t,(function(n){e.props.endpointAdded(t)}),(function(e){di.emit("errorOccured","Error Saving Your endpoint.")}))}},r.a.createElement(Xa.a,{primary:t.name,secondary:t.canonical_name}))}));return r.a.createElement("div",{style:{width:300,height:400,backgroundColor:"white",borderWidth:"1px",borderColor:"#005bbb",borderRadius:2,borderStyle:"solid",overflow:"hidden"}},a&&r.a.createElement(gn.a,null),r.a.createElement(or.a,{style:dr.root,elevation:0},r.a.createElement(ir.a,{style:dr.input,placeholder:"Search for Endpoints",value:n,onChange:function(t){e.setState({search_text:t.target.value})}}),r.a.createElement(sr.a,{style:dr.iconButton,"aria-label":"Search",onClick:function(t){e.getEndpointListAsData()}},r.a.createElement(cr.a,null))),0===o.length&&r.a.createElement("h3",{style:{margin:"100px"}}," No Result "),r.a.createElement(Ja.a,{component:"nav",style:{overflow:"auto",height:"100%"}},o.length>0&&i))}}]),t}(a.Component),mr=n(567),pr=n(83),fr=n.n(pr),hr=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).credentialListUpdateFromBackend=function(){n.props.setLoading(!0),He((function(e){n.setState({credList:e}),n.props.setLoading(!1)}),(function(e){n._handleError(e),n.props.setLoading(!1)}))},n.endpointIdsListUpdateFromBackend=function(){n.props.setLoading(!0),Ue({},(function(e){n.setState({endpointIdsList:e}),n.props.setLoading(!1)}),(function(e){n._handleError(e),n.props.setLoading(!1)}))},n.historyListUpdateFromBackend=function(){n.props.setLoading(!0),ze("",-1,(function(e){n.setState({historyList:e.filter((function(e){return 0===e.indexOf(n.props.endpoint.uri)}))}),n.props.setLoading(!1)}),(function(e){n._handleError("Unable to retrieve data from backend. Try log out or wait for few minutes."),n.props.setLoading(!1)}))},n._handleError=function(e){di.emit("errorOccured",e)},n.handleChange=function(e){return function(t){n.setState(Object(G.a)({},e,t.target.value))}},n.handleUrlChange=function(e){return function(t){for(var a=t.target.value,r=0,o=0;o<a.length;r+=+(":"===a[o++]));n.setState(Object(G.a)({portNumField:!(r>=2)},e,t.target.value))}},n.endpointCheckin=function(e,t,a,r){n.props.setLoading(!0);for(var o=0,i=0;i<e.length;o+=+(":"===e[i++]));1===o&&(e=e+":"+t);var s={uri:e,login:!0,side:n.props.endpoint.side,credential:a,portNumber:t};F(s.uri)?s.uri.startsWith("scp://")&&(s.uri="sftp://"+s.uri.substring(6),e=s.uri):n._handleError("Protocol is not understood"),Ze(e,s,null,(function(a){ze(e,t,(function(e){console.log(e)}),(function(e){n._handleError(e)})),n.props.loginSuccess(s)}),(function(e){n.props.setLoading(!1),r(e)}))},n.regularSignIn=function(){n.state.needPassword?n.endpointCheckin(n.state.url,n.state.portNum,{type:"userinfo",username:n.state.username,password:n.state.password},(function(e){n._handleError("Authentication Failed")})):n.endpointCheckin(n.state.url,n.state.portNum,{},(function(){n.setState({needPassword:!0})}))},n.globusSignIn=function(){n.state.needPassword?n.endpointCheckin(n.state.url,n.state.portNum,{type:"userinfo",username:n.state.username,password:n.state.password},(function(e){n._handleError("Authentication Failed")})):n.endpointCheckin(n.state.url,n.state.portNum,{},(function(){n.setState({needPassword:!0})}))},n.globusActivateSignin=function(){var e=n.state.endpointSelected;n.props.setLoading(!0),function(e,t,n,a,r){We.apply(this,arguments)}(e,n.state.username,n.state.password,(function(t){n.props.setLoading(!1),e.activated=!0,n.endpointModalLogin(e)}),(function(e){n.props.setLoading(!1),n._handleError("Authentication Failed")}))},n.endpointModalAdd=function(e){n.props.setLoading(!0),Ue({},(function(t){n.setState({endpointIdsList:t}),n.endpointModalLogin(e),n.props.setLoading(!1)}),(function(e){n._handleError(e),n.props.setLoading(!1)}))},n.endpointModalLogin=function(e){"false"===e.activated?(di.emit("messageOccured","Please activate your globus endpoint using credential."),n.setState({settingAuth:!0,authFunction:n.globusActivateSignin,needPassword:!0,endpointSelected:e,selectingEndpoint:!1})):(n.setState({selectingEndpoint:!1}),n.endpointCheckin("gsiftp:///",n.state.portNum,{type:"globus",globusEndpoint:e},(function(e){n._handleError("Authentication Failed")})))},n.state={historyList:e.history,endpoint:e.endpoint,credList:e.credentials||{},endpointIdsList:{},settingAuth:!1,settingAuthType:"",url:"",needPassword:!1,username:"",password:"",endpointSelected:{},selectingEndpoint:!1,portNum:-1,portNumField:!0};var a=I(e.endpoint);return a===C?n.endpointIdsListUpdateFromBackend():a!==S&&a!==k||n.historyListUpdateFromBackend(),n.handleChange=n.handleChange.bind(Object(pn.a)(n)),n._handleError=n._handleError.bind(Object(pn.a)(n)),n.getEndpointListComponentFromList=n.getEndpointListComponentFromList.bind(Object(pn.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"deleteCredentialFromLocal",value:function(e,t){this.props.setLoading(!0);var n=JSON.parse(Oe.get(t)).filter((function(t){return t.name!==e.name}));0===n.length?Oe.remove(t):Oe.set(t,JSON.stringify(n)),this.setState({credList:n}),this.props.setLoading(!1)}},{key:"getEndpointListComponentFromList",value:function(e){var t=this;return Object.keys(e).map((function(n){return r.a.createElement(Ya.a,{button:!0,key:n,onClick:function(){!function(e,t,n){_e.apply(this,arguments)}(e[n],(function(e){t.endpointModalLogin(e)}),(function(e){t._handleError("Unable to get detail of this endpoint")}))}},r.a.createElement(Ka.a,null,r.a.createElement($a.a,null)),r.a.createElement(Xa.a,{primary:e[n].name,secondary:e[n].canonical_name}),r.a.createElement(mr.a,null,r.a.createElement(sr.a,{"aria-label":"Delete",onClick:function(){!function(e,t,n){qe.apply(this,arguments)}(e[n],(function(e){t.endpointIdsListUpdateFromBackend()}),(function(e){t._handleError("Delete Credential Failed")}))}},r.a.createElement(fr.a,null))))}))}},{key:"getCredentialListComponentFromList",value:function(e,t){var n=this,a=this.state.endpoint,o=this.props.loginSuccess;return ui.getState().saveOAuthTokens?Object.keys(e).filter((function(n){return-1!==e[n].name.toLowerCase().indexOf(t.toLowerCase())&&!ce().includes(n)})).map((function(t){return r.a.createElement(Ya.a,{button:!0,key:t,onClick:function(){var n={uri:a.uri,login:!0,credential:{uuid:t,name:e[t].name,tokenSaved:!0},side:a.side};o(n)}},r.a.createElement(Ka.a,null,r.a.createElement($a.a,null)),r.a.createElement(Xa.a,{primary:e[t].name}),r.a.createElement(mr.a,null,r.a.createElement(sr.a,{"aria-label":"Delete",onClick:function(){!function(e,t,n){ft.apply(this,arguments)}(t,(function(e){n.credentialListUpdateFromBackend()}),(function(e){n._handleError("Delete Credential Failed")}))}},r.a.createElement(fr.a,null))))})):e.map((function(e){return r.a.createElement(Ya.a,{button:!0,onClick:function(){var t={uri:a.uri,login:!0,credential:{name:e.name,tokenSaved:!1,token:e.token},side:a.side};o(t)}},r.a.createElement(Ka.a,null,r.a.createElement($a.a,null)),r.a.createElement(Xa.a,{primary:e.name}),r.a.createElement(mr.a,null,r.a.createElement(sr.a,{"aria-label":"Delete",onClick:function(){return n.deleteCredentialFromLocal(e,t)}},r.a.createElement(fr.a,null))))}))}},{key:"getHistoryListComponentFromList",value:function(e){var t=this;return e.map((function(e){return r.a.createElement(Ya.a,{button:!0,key:e,onClick:function(){var n=new URL(e),a=n.port;0===n.port.length&&(a=N(e)),t.endpointCheckin(e,a,{},(function(n){t._handleError("Please enter your credential."),t.setState({url:e,authFunction:t.regularSignIn,settingAuth:!0,needPassword:!0,portNum:a})}))}},r.a.createElement(Ka.a,null,r.a.createElement($a.a,null)),r.a.createElement(Xa.a,{primary:e}),r.a.createElement(mr.a,null,r.a.createElement(sr.a,{"aria-label":"Delete",onClick:function(){!function(e,t,n){Ve.apply(this,arguments)}(e,(function(e){t.historyListUpdateFromBackend()}),(function(e){t._handleError("Delete History Failed")}))}},r.a.createElement(fr.a,null))))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.historyList,a=t.endpoint,o=t.credList,i=t.settingAuth,s=t.authFunction,l=t.needPassword,c=t.endpointIdsList,d=t.selectingEndpoint,u=this.props.back,m=function(e){return x[e.uri.split(":")[0].toLowerCase()]}(a),p=I(a),f=this.getEndpointListComponentFromList(c),h=function(){e.setState({selectingEndpoint:!1})};return r.a.createElement("div",null,!i&&r.a.createElement(Ja.a,{component:"nav",style:{overflow:"auto"}},r.a.createElement(Ya.a,{button:!0,onClick:function(){u()}},r.a.createElement(Ka.a,null,r.a.createElement(tr.a,null)),r.a.createElement(Xa.a,{primary:"Back"})),r.a.createElement(Ya.a,{button:!0,onClick:function(){if("dropbox:///"===p)yt();else if(p===O)Et();else if(p===S){e.setState({settingAuth:!0,authFunction:e.regularSignIn,needPassword:!1,url:"ftp://",portNum:N("ftp://")})}else if(p===k){e.setState({settingAuth:!0,authFunction:e.regularSignIn,needPassword:!0,url:"sftp://",portNum:N("sftp://")})}else if("http://"===p){e.setState({settingAuth:!0,authFunction:e.regularSignIn,needPassword:!1,url:"http://",portNum:N("http://")})}else if("scp://"===p){e.setState({settingAuth:!0,authFunction:e.regularSignIn,needPassword:!1,url:"scp://",portNum:N("scp://")})}else p===C&&e.setState({selectingEndpoint:!0,authFunction:e.globusSignIn})}},r.a.createElement(Ka.a,null,r.a.createElement(ar.a,null)),r.a.createElement(Xa.a,{primary:"Add New "+m})),r.a.createElement(Qa.a,null),("dropbox:///"===p||p===O)&&this.getCredentialListComponentFromList(o,m),p===C&&f,"dropbox:///"!==p&&p!==O&&p!==C&&this.getHistoryListComponentFromList(n)),r.a.createElement(rr.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"To Select globus endpoints",open:d,onClose:h,style:{display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"center"}},r.a.createElement(ur,{close:h,endpointAdded:this.endpointModalAdd})),i&&r.a.createElement("div",{style:{flexGrow:1,flexDirection:"column"}},r.a.createElement(hn.a,{style:{width:"100%",textAlign:"left"},onClick:function(){e.setState({settingAuth:!1})}}," ",r.a.createElement(tr.a,null),"Back"),r.a.createElement(Qa.a,null),p!==C&&r.a.createElement("div",null,r.a.createElement(Pa.a,{style:{width:"60%"},id:"outlined-name",label:"Url",value:this.state.url,onChange:this.handleUrlChange("url"),margin:"normal",variant:"outlined"}),r.a.createElement(Pa.a,{style:{width:"20%",background:this.state.portNumField?"white":"#D3D3D3"},id:"outlined-pnum",disabled:!this.state.portNumField,label:"Port Number",value:this.state.portNumField?this.state.portNum:"-",onChange:this.handleChange("portNum"),margin:"normal",variant:"outlined"})),l&&r.a.createElement("div",null,r.a.createElement(Pa.a,{style:{width:"80%"},id:"outlined-name",label:"Username",value:this.state.username,onChange:this.handleChange("username"),margin:"normal",variant:"outlined"}),r.a.createElement(Pa.a,{style:{width:"80%"},id:"outlined-name",label:"Password",type:"password",value:this.state.password,onChange:this.handleChange("password"),margin:"normal",variant:"outlined"})),r.a.createElement(hn.a,{style:{width:"100%",textAlign:"left"},onClick:s},"Next")))}}]),t}(a.Component);function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var br=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e)))._handleError=function(e){di.emit("errorOccured",e)},n.credentialTypeExistsThenDo=function(e,t,a){if(n.setLoading(!0),ui.getState().saveOAuthTokens)console.log("Checking backend for "+e+" credentials"),He((function(r){Object.keys(r).some((function(t){return-1!==r[t].name.toLowerCase().indexOf(e.toLowerCase())}))?t(r):a(),n.setLoading(!1)}),(function(e){n._handleError("Could not get credential from our server. Maybe check your internet connection."),a(),n.setLoading(!1)}));else{console.log("Checking cookies for "+e+" credentials");var r=Oe.get(e)||0;0!==r?(r=JSON.parse(r),t(r),n.setLoading(!1)):(a(),n.setLoading(!1))}};var a=function(e){return(I(e.endpoint1)===C||I(e.endpoint2)===C)&&(e.endpoint1.login||e.endpoint1.login)},r=function(e){return I(e.endpoint1)===C||I(e.endpoint2)===C||!(e.endpoint1.login||e.endpoint1.login)},o=ui.getState();return n.state={history:e.history.filter((function(t){return 0===t.indexOf(e.endpoint.uri)})),creds:{},endpoint:e.endpoint,mode:e.mode,loading:!1,oneSideIsLoggedInAsGridftp:a(o),gridftpIsOpen:r(o)},n.unsubcribe=ui.subscribe((function(){var e=ui.getState(),t=a(e),o=r(e);t===n.state.oneSideIsLoggedInAsGridftp&&o===n.state.gridftpIsOpen||n.setState({oneSideIsLoggedInAsGridftp:t,gridftpIsOpen:o})})),n.setLoading=n.setLoading.bind(Object(pn.a)(n)),n.getLoading=n.getLoading.bind(Object(pn.a)(n)),n.credentialTypeExistsThenDo=n.credentialTypeExistsThenDo.bind(Object(pn.a)(n)),n._handleError=n._handleError.bind(Object(pn.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"getLoading",value:function(){return this.state.loading}},{key:"componentDidMount",value:function(){Object(yn.loadCSS)("https://use.fontawesome.com/releases/v5.1.0/css/all.css",document.querySelector("#font-awesome-css"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.endpoint,a=t.mode,o=t.history,i=t.type,s=t.loading,l=t.creds,c=t.oneSideIsLoggedInAsGridftp,d=t.gridftpIsOpen,u=this.props.update,m=function(t){return function(a){e.setState({mode:1,history:e.props.history.filter((function(e){return 0===e.indexOf(t)})),endpoint:yr({},n,{uri:t}),creds:a}),e.props.update({mode:1,endpoint:yr({},n,{uri:t})})}},p=function(){e.setState({mode:0,endpoint:yr({},n,{uri:"",login:!1,credential:{}})}),e.props.update({mode:0,endpoint:yr({},n,{uri:"",login:!1,credential:{}})})},f={marginRight:"10px",fontSize:"16px",width:"20px"},h={flexGrow:1,justifyContent:"flex-start",width:"100%",fontSize:"12px",paddingLeft:"30%"};return r.a.createElement("div",{id:"browser"+n.side,style:{borderWidth:"1px",borderColor:"#005bbb",borderStyle:"solid",borderRadius:"10px",width:"auto",height:"auto",overflow:"hidden"}},!n.login&&0===a&&r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){e.credentialTypeExistsThenDo(j,m("dropbox:///"),yt)}},r.a.createElement(bn.a,{className:"fab fa-dropbox",style:f}),"DropBox"),r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){m(S)()}},r.a.createElement(bn.a,{className:"far fa-folder-open",style:f}),"FTP"),r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){e.credentialTypeExistsThenDo(P,m(O),Et)}},r.a.createElement(bn.a,{className:"fab fa-google-drive",style:f}),"Google Drive"),r.a.createElement(hn.a,{style:h,disabled:!d,onClick:function(){e.credentialTypeExistsThenDo("GridFTP",m(C),wt)}},r.a.createElement(bn.a,{className:"fas fa-server",style:f}),"Grid FTP"),r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){m("http://")()}},r.a.createElement(bn.a,{className:"fas fa-globe",style:f}),"HTTP/HTTPS"),r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){m(k)()}},r.a.createElement(bn.a,{className:"fas fa-folder-open",style:f}),"SFTP"),r.a.createElement(hn.a,{style:h,disabled:c,onClick:function(){m("scp://")()}},r.a.createElement(bn.a,{className:"fas fa-terminal",style:f}),"SSH")),!n.login&&1===a&&r.a.createElement("div",null,s&&r.a.createElement(gn.a,null),r.a.createElement(hr,{endpoint:n,history:o,type:i,credentials:l,loginSuccess:function(t){e.setState({endpoint:t}),u({endpoint:t})},setLoading:this.setLoading,back:p})),n.login&&r.a.createElement("div",null,s&&r.a.createElement(gn.a,null),r.a.createElement(Ga,{endpoint:n,setLoading:this.setLoading,getLoading:this.getLoading,back:p,displayStyle:this.props.displayStyle})))}}]),t}(a.Component),Er=n(56),vr=n(561),wr=n(592),Or=n(570),Sr=n(571),kr=n(562),Cr=n(287),jr=n.n(Cr),Pr=n(572),xr=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n.state={errorMessages:[{msg:"Thank you for using onedatashare, currently we do not support transfer between gridftp and other modules, Gridftp can only transfer to gridftp.",color:"black"}]},n.onErrorOccured=n.onErrorOccured.bind(Object(pn.a)(n)),n.onMessageOccurred=n.onMessageOccurred.bind(Object(pn.a)(n)),n.onWarningOccurred=n.onWarningOccurred.bind(Object(pn.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){di.on("errorOccured",this.onErrorOccured),di.on("messageOccured",this.onMessageOccurred),di.on("warningOccured",this.onWarningOccurred)}},{key:"onErrorOccured",value:function(e){var t=this.state.errorMessages;t.push({msg:e,color:"red"}),this.setState({errorMessages:t})}},{key:"onMessageOccurred",value:function(e){var t=this.state.errorMessages;t.push({msg:e,color:"black"}),this.setState({errorMessages:t})}},{key:"onWarningOccurred",value:function(e){var t=this.state.errorMessages;t.push({msg:e,color:"orange"}),this.setState({errorMessages:t})}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state.errorMessages;return r.a.createElement("div",{style:{textAlign:"left",borderWidth:1,height:"150px",overflow:"scroll",wordWrap:"break-word",borderStyle:"solid",borderColor:"black",padding:"5px",borderRadius:"10px"}},t.map((function(e){return r.a.createElement("p",{style:{color:e.color}},e.msg)})),r.a.createElement("p",{ref:function(t){e.messagesEnd=t}}," >"))}}]),t}(a.Component),Tr=n(286),Dr=n.n(Tr);function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nr=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).sendFile=function(e){if(0===e.selectedTasks.length)return di.emit("errorOccured","You did not select any files!"),0;var t=ge(e.fromTo[0]),a=ge(e.fromTo[1]),r=n.state.settings,o=[],i=[],s=[];console.log(e.selectedTasks),e.selectedTasks.map((function(n){o.push(ie(t.uri,e.fromTo[0].path,n.name)),i.push(n.id),s.push(ie(a.uri,e.fromTo[1].path,n.name))}));var l={};Object.keys(r).map((function(e){var t=r[e];"true"!==t&&"false"!==t||(t=JSON.parse(t)),l[e]=t}));for(var c,d={credential:t.credential},u={credential:a.credential,id:(c=a,"left"===c.side?$.ids[$.ids.length-1]:ee.ids[ee.ids.length-1])},m=0;m<o.length;m++)d.id=i[m],d.uri=o[m],u.uri=s[m],Xe(d,t,u,a,l,(function(t){di.emit("messageOccured","Transfer Scheduled!"),me(e)}),(function(e){di.emit("errorOccured",e)}))},n.onDragStart=function(e){var t=JSON.parse(e.draggableId.slice(e.draggableId.indexOf(" "))),n=e.source.droppableId;ye()[n].find((function(e){return e.name===t.name}))||Ee(),oe(t)},n.onDragEnd=function(e){var t=e.destination,a=e.source;if(t&&"CANCEL"!==e.reason){console.log(ye(),e.source,e.destination);var r=xn({entities:se(),selectedTasks:ye(),source:a,destination:t});r.fromTo[0]===r.fromTo[1]?me(r):n.sendFile(r),oe(null)}else oe(null)},n.state={endpoint1:ui.getState().endpoint1,endpoint2:ui.getState().endpoint2,mode1:0,mode2:0,history:[],width:window.innerWidth,height:window.innerHeight,settings:{optimizer:"None",overwrite:"true",verify:"true",encrypt:"true",compress:"true",retry:5},compact:!0},n.unsubcribe=ui.subscribe((function(){n.setState({endpoint1:ui.getState().endpoint1,endpoint2:ui.getState().endpoint2})})),n.printError=n.printError.bind(Object(pn.a)(n)),n.updateDimensions=n.updateDimensions.bind(Object(pn.a)(n)),n._returnBrowseComponent1=n._returnBrowseComponent1.bind(Object(pn.a)(n)),n._returnBrowseComponent2=n._returnBrowseComponent2.bind(Object(pn.a)(n)),n.updateBrowseOne=n.updateBrowseOne.bind(Object(pn.a)(n)),n.updateBrowseTwo=n.updateBrowseTwo.bind(Object(pn.a)(n)),n.sendFile=n.sendFile.bind(Object(pn.a)(n)),n.onSendToRight=n.onSendToRight.bind(Object(pn.a)(n)),n.onSendToLeft=n.onSendToLeft.bind(Object(pn.a)(n)),n.printError(),Xt(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"printError",value:function(){var e=Dr.a.parse(this.props.location.search);console.log("error is",e),e&&e.error&&setTimeout((function(){di.emit("errorOccured",e.error)}),500)}},{key:"componentDidMount",value:function(){document.title="OneDataShare - Transfer",window.addEventListener("resize",this.updateDimensions),this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"updateDimensions",value:function(){var e=this.state.width;(e>760&&Sn()||e<=760&&!Sn())&&this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"_returnBrowseComponent1",value:function(){var e=this.state,t=e.mode1,n=e.endpoint1,a=e.history,o=e.compact;return r.a.createElement(br,{id:"browserleft",mode:t,endpoint:n,history:a,displayStyle:o?"compact":"comfort",update:this.updateBrowseOne})}},{key:"_returnBrowseComponent2",value:function(){var e=this.state,t=e.mode2,n=e.endpoint2,a=e.history,o=e.compact;return r.a.createElement(br,{id:"browserright",mode:t,endpoint:n,history:a,displayStyle:o?"compact":"comfort",update:this.updateBrowseTwo})}},{key:"updateBrowseOne",value:function(e){void 0===e.mode&&(e.mode=0),this.setState({endpoint1:e.endpoint||this.state.endpoint1,mode1:e.mode}),e.endpoint&&ui.dispatch(q(e.endpoint.side,Ir({},this.state.endpoint1,{},e.endpoint)))}},{key:"updateBrowseTwo",value:function(e){void 0===e.mode&&(e.mode=0),this.setState({endpoint2:e.endpoint||this.state.endpoint2,mode2:e.mode}),e.endpoint&&ui.dispatch(q(e.endpoint.side,Ir({},this.state.endpoint2,{},e.endpoint)))}},{key:"onSendToRight",value:function(){var e=se(),t={fromTo:[e.left,e.right],selectedTasks:fe({side:"left"})};this.sendFile(t)}},{key:"onSendToLeft",value:function(){var e=se(),t={fromTo:[e.right,e.left],selectedTasks:fe({side:"right"})};console.log(t),this.sendFile(t)}},{key:"getSettingComponent",value:function(e){var t=this,n=function(e){return function(n){var a=n.target.value;t.setState({settings:Ir({},t.state.settings,Object(G.a)({},e,a))})}},a={fontSize:"15px"},o={marginLeft:"5%",marginRight:"5%"};return r.a.createElement(fn.a,{bsStyle:"primary"},r.a.createElement(fn.a.Heading,null,"Transfer Setting"),r.a.createElement(fn.a.Body,{key:e,style:{overflow:"hidden"}},r.a.createElement(vr.a,{component:"fieldset",style:o},r.a.createElement(kr.a,{component:"legend",style:a},"Optimization"),r.a.createElement(Or.a,{"aria-label":"Optimization",value:this.state.settings.optimizer,onChange:n("optimizer")},r.a.createElement(Sr.a,{value:"None",control:r.a.createElement(wr.a,null),label:"None"}),r.a.createElement(Sr.a,{value:"2nd Order",control:r.a.createElement(wr.a,null),label:"2nd Order"}),r.a.createElement(Sr.a,{value:"PCP",control:r.a.createElement(wr.a,null),label:"PCP"}))),r.a.createElement(vr.a,{component:"fieldset",style:o},r.a.createElement(kr.a,{component:"legend",style:a},"Overwrite"),r.a.createElement(Or.a,{"aria-label":"Overwrite",value:this.state.settings.overwrite,onChange:n("overwrite")},r.a.createElement(Sr.a,{value:"true",control:r.a.createElement(wr.a,null),label:"True"}),r.a.createElement(Sr.a,{value:"false",control:r.a.createElement(wr.a,null),label:"False"}))),r.a.createElement(vr.a,{component:"fieldset",style:o},r.a.createElement(kr.a,{component:"legend",style:a},"Integrity"),r.a.createElement(Or.a,{"aria-label":"Integrity",value:this.state.settings.verify,onChange:n("verify")},r.a.createElement(Sr.a,{value:"true",control:r.a.createElement(wr.a,null),label:"True"}),r.a.createElement(Sr.a,{value:"false",control:r.a.createElement(wr.a,null),label:"False"}))),r.a.createElement(vr.a,{component:"fieldset",style:o},r.a.createElement(kr.a,{component:"legend",style:a},"Encrypt"),r.a.createElement(Or.a,{"aria-label":"Encrypt",value:this.state.settings.encrypt,onChange:n("encrypt")},r.a.createElement(Sr.a,{value:"true",control:r.a.createElement(wr.a,null),label:"True"}),r.a.createElement(Sr.a,{value:"false",control:r.a.createElement(wr.a,null),label:"False"}))),r.a.createElement(vr.a,{component:"fieldset",style:o},r.a.createElement(kr.a,{component:"legend",style:a},"Compress"),r.a.createElement(Or.a,{"aria-label":"Compress",value:this.state.settings.compress,onChange:n("compress")},r.a.createElement(Sr.a,{value:"true",control:r.a.createElement(wr.a,null),label:"True"}),r.a.createElement(Sr.a,{value:"false",control:r.a.createElement(wr.a,null),label:"False"}))),r.a.createElement(vr.a,{component:"fieldset"},r.a.createElement(kr.a,{component:"legend",style:a},"Retry Counts"),r.a.createElement(jr.a,{value:this.state.settings.retry,min:0,max:10,step:1,onChange:function(e,n){t.setState({settings:Ir({},t.state.settings,{retry:n})})}}),r.a.createElement(kr.a,{style:{marginTop:"20px",fontSize:"20px"}},this.state.settings.retry," Times"))))}},{key:"render",value:function(){var e=this,t=Sn(),n={height:"auto",margin:t?"10px":"0px"},a=function(t){return function(n){e.setState(Object(G.a)({},t,n.target.checked))}};return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingTop:"20px"}},r.a.createElement(Dt.a,{xs:11,style:{display:"flex",justifyContent:"center",flexDirection:"column"}},!t&&r.a.createElement(fn.a,{bsStyle:"primary"},r.a.createElement(Sr.a,{style:{width:"200px",right:"10px",color:"white",position:"absolute"},control:r.a.createElement(Pr.a,{color:"default",style:{colorPrimary:"white",colorSecondary:"white"},checked:this.state.compact,onChange:a("compact"),value:"compact"}),label:r.a.createElement(Er.a,{style:{color:"white",fontSize:"12px"}},"Compact")}),r.a.createElement(fn.a.Heading,null,r.a.createElement("p",null,"Browse and Transfer Files")),r.a.createElement(fn.a.Body,{key:t,style:{overflow:"hidden"}},r.a.createElement(It.a,{style:{flexDirection:"column"}},r.a.createElement(zn.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.a.createElement(Dt.a,{xs:6,style:n},this._returnBrowseComponent1()),r.a.createElement(Dt.a,{xs:6,style:n},this._returnBrowseComponent2()))),r.a.createElement(It.a,{style:{display:"block"}},r.a.createElement(hn.a,{style:{padding:"15px",marginRight:"10px"},onClick:this.onSendToLeft}," ",r.a.createElement(Tt.a,{glyph:"arrow-left"}),"    Send"),r.a.createElement(hn.a,{style:{padding:"15px",marginLeft:"10px"},onClick:this.onSendToRight}," Send",r.a.createElement(Tt.a,{glyph:"arrow-right"}))),r.a.createElement(xr,null))),t&&r.a.createElement(fn.a,{bsStyle:"primary"},r.a.createElement(Sr.a,{style:{width:"200px",float:"right",color:"white"},control:r.a.createElement(Pr.a,{color:"default",style:{colorPrimary:"white",colorSecondary:"white"},checked:this.state.compact,onChange:a("compact"),value:"compact"}),label:r.a.createElement(Er.a,{style:{fontSize:"12px"}},"Compact")}),r.a.createElement(fn.a.Heading,null,r.a.createElement("p",null,"Browse and Transfer Files")),r.a.createElement(fn.a.Body,{key:t,style:{overflow:"hidden"}},r.a.createElement(It.a,{style:{flexDirection:"column"}},r.a.createElement(zn.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.a.createElement(Dt.a,{style:n},this._returnBrowseComponent1()),r.a.createElement(It.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement(hn.a,{style:{padding:"15px",marginRight:"10px"},onClick:this.onSendToLeft}," ",r.a.createElement(Tt.a,{glyph:"arrow-up"})," Send"),r.a.createElement(hn.a,{style:{padding:"15px",marginLeft:"10px"},onClick:this.onSendToRight}," Send",r.a.createElement(Tt.a,{glyph:"arrow-down"}))),r.a.createElement(It.a,{style:n},this._returnBrowseComponent2()))),r.a.createElement("div",null," "),r.a.createElement(xr,null)))))}}]),t}(a.Component),Fr=n(579),Br=n(581),Lr=n(576),zr=n(580),Rr=n(575),Ur=n(573),Mr=n(253),_r=n(577),Wr=n(589),Vr=n(578),qr=n(574),Hr=n(141),Gr=n.n(Hr),Jr=n(142),Yr=n.n(Jr),Kr=n(598),Xr=n(582),Qr=n(6),Zr=n(186),$r=n.n(Zr),eo=n(187),to=n.n(eo),no=n(185),ao=n.n(no),ro=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleFirstPageButtonClick=function(e){n.props.onChangePage(e,0)},n.handleBackButtonClick=function(e){n.props.onChangePage(e,n.props.page-1)},n.handleNextButtonClick=function(e){n.props.onChangePage(e,n.props.page+1)},n.handleLastPageButtonClick=function(e){n.props.onChangePage(e,Math.max(0,Math.ceil(n.props.count/n.props.rowsPerPage)-1))},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.count,a=e.page,o=e.rowsPerPage,i=e.theme;return r.a.createElement("div",{className:t.root},r.a.createElement(sr.a,{onClick:this.handleFirstPageButtonClick,disabled:0===a,"aria-label":"First Page"},"rtl"===i.direction?r.a.createElement(ao.a,null):r.a.createElement($r.a,null)),r.a.createElement(sr.a,{onClick:this.handleBackButtonClick,disabled:0===a,"aria-label":"Previous Page"},"rtl"===i.direction?r.a.createElement(to.a,null):r.a.createElement(tr.a,null)),r.a.createElement(sr.a,{onClick:this.handleNextButtonClick,disabled:a>=Math.ceil(n/o)-1,"aria-label":"Next Page"},"rtl"===i.direction?r.a.createElement(tr.a,null):r.a.createElement(to.a,null)),r.a.createElement(sr.a,{onClick:this.handleLastPageButtonClick,disabled:a>=Math.ceil(n/o)-1,"aria-label":"Last Page"},"rtl"===i.direction?r.a.createElement($r.a,null):r.a.createElement(ao.a,null)))}}]),t}(r.a.Component),oo=Object(Qr.a)((function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit},tablePaginationActions:{color:"red"}}}),{withTheme:!0})(ro);function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lo=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).queueFunc=function(){Je(!0,e.state.page,e.state.rowsPerPage,e.state.orderBy,e.state.order,(function(t){var n=[];n=0===e.state.page?t.jobs.slice(0,e.state.rowsPerPage):t.jobs.slice(e.state.rowsPerPage,2*e.state.rowsPerPage),e.setState({response:t.jobs,responsesToDisplay:n,totalCount:t.totalCount})}),(function(e){console.log("Error in queue request to API layer")}))},e.handleChangePage=function(t,n){var a;console.log("The page is:"+n),a=n>e.state.page?e.state.response.slice(e.state.rowsPerPage,2*e.state.rowsPerPage):e.state.response.slice(0,e.state.rowsPerPage),e.state.page=n,e.setState({page:n,response:e.state.response,responsesToDisplay:a});for(var r=document.getElementsByClassName("rohit"),o=0;o<r.length;o++)r[o].style.display="none";e.queueFunc()},e.handleChangeRowsPerPage=function(t){e.setState({page:0,rowsPerPage:parseInt(t.target.value)}),e.queueFunc()},e.handleRequestSort=function(t){var n=t,a="desc";e.state.orderBy===t&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:n}),e.queueFunc()},e.state={response:[],responsesToDisplay:[],selectedTab:0,page:0,rowsPerPage:10,rowsPerPageOptions:[10,20,50,100],order:"desc",orderBy:"job_id"},e.queueFunc=e.queueFunc.bind(Object(pn.a)(e)),e.queueFunc(),e.interval=setInterval(e.queueFunc,2e3),e.toggleTabs=e.toggleTabs.bind(Object(pn.a)(e)),Xt(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - History"}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"getStatus",value:function(e,t,n){var a={marginTop:"5%",fontWeight:"bold"};if("complete"===e)return r.a.createElement(Ur.a,{now:100,label:"Complete",style:a});if("failed"===e)return r.a.createElement(Ur.a,{bsStyle:"danger",now:100,style:a,label:"Failed"});var o=(n/t*100).toFixed();return r.a.createElement(Ur.a,{bsStyle:"danger",now:o,style:a,label:"Processing "+o+"%"})}},{key:"getFormattedDate",value:function(e){return 1+e.getMonth()+"/"+e.getDate()+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"renderSpeed",value:function(e){return e>1e9?(e/1e9).toFixed(2)+" GB/s":e>1e6?(e/1e6).toFixed(2)+" MB/s":e>1e3?(e/1e3).toFixed(2)+" KB/s":e+" B/s"}},{key:"infoButtonOnClick",value:function(e){var t=document.getElementById("info_"+e);if(this.selectedJobInfo===e&&"none"!==t.style.display)t.style.display="none";else{var n=document.getElementById("info_"+this.selectedJobInfo);n&&(n.style.display="none"),t.style.display="table-row",this.selectedJobInfo=e}}},{key:"closeAllInfoRows",value:function(){for(var e=0;e<this.infoRowsIds.length;e++){var t=document.getElementById(this.infoRowsIds[e]);"none"!==t.style.display&&(t.style.display="none")}this.setState({selectedTab:0})}},{key:"cancelButtonClick",value:function(e){}},{key:"toggleTabs",value:function(){0===this.state.selectedTab?this.setState({selectedTab:1}):this.setState({selectedTab:0})}},{key:"renderActions",value:function(e,t,n){var a=this;return this.infoRowsIds=this.infoRowsIds||[],this.infoRowsIds.push("info_"+e),r.a.createElement("div",null,r.a.createElement(E.a,{TransitionComponent:qr.a,placement:"top",title:"Detailed Information"},r.a.createElement(hn.a,{onClick:function(){a.infoButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontFamily:"FontAwesome",fontSize:"1.5rem",height:"30%",fontWeight:"bold",width:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(Gr.a,null))),"processing"===t&&r.a.createElement(E.a,{TransitionComponent:qr.a,title:"Cancel"},r.a.createElement(hn.a,{onClick:function(){a.cancelButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontSize:"1.5rem",fontWeight:"bold",width:"20%",height:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(Yr.a,null))))}},{key:"decodeURIComponent",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return decodeURIComponent(e)}))},{key:"renderTabContent",value:function(e){return 0===this.state.selectedTab?r.a.createElement(Mr.a,{style:{paddingTop:"0.5%",paddingBottom:"0.5%",width:"fit-content"}},r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"User")),r.a.createElement(Dt.a,{md:6},e.owner)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Job ID")),r.a.createElement(Dt.a,{md:6},e.job_id)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Source")),r.a.createElement(Dt.a,{md:6},e.src.uri)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Destination")),r.a.createElement(Dt.a,{md:6},e.dest.uri)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Instant Speed")),r.a.createElement(Dt.a,{md:6},this.renderSpeed(e.bytes.inst))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Average Speed")),r.a.createElement(Dt.a,{md:6},this.renderSpeed(e.bytes.avg))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Scheduled Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(new Date(e.times.scheduled)))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Started Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(new Date(e.times.started)))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Completed Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(new Date(e.times.completed)))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Time Duration")),r.a.createElement(Dt.a,{md:6},((e.times.completed-e.times.started)/1e3).toFixed(2)," sec")),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Attempts")),r.a.createElement(Dt.a,{md:6},e.attempts)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Status")),r.a.createElement(Dt.a,{md:6},e.status))):1===this.state.selectedTab?r.a.createElement("pre",null,JSON.stringify(e,null,"\t")):void 0}},{key:"render",value:function(){var e=this,t=this.state,n=t.totalCount,a=t.responsesToDisplay,o={textAlign:"center"},i=this.state,s=i.rowsPerPage,l=i.rowsPerPageOptions,c=i.page,d=i.order,u=i.orderBy,m=this.props.classes,p="job_id",f="status",h="bytes.avg",g="src.uri",y="owner",b=[];return a.map((function(t){b.push(r.a.createElement(Rr.a,{style:{alignSelf:"stretch"}},r.a.createElement(Lr.a,{component:"th",scope:"row",style:so({},o,{width:"7.5%",fontSize:"1rem"}),numeric:!0},t.owner),r.a.createElement(Lr.a,{style:so({},o,{width:"40%",fontSize:"1rem"})},t.job_id),r.a.createElement(Lr.a,{style:so({},o,{width:"40%",fontSize:"1rem"})},e.getStatus(t.status,t.bytes.total,t.bytes.done)),r.a.createElement(Lr.a,{style:so({},o,{width:"35%",maxWidth:"20vw",overflow:"hidden",fontSize:"1rem",margin:"0px",maxHeight:"10px"})},e.renderSpeed(t.bytes.avg)),r.a.createElement(Lr.a,{style:so({},o,{width:"10%",fontSize:"1rem"})},e.decodeURIComponent(t.src.uri)," ",r.a.createElement("b",null,"->")," ",e.decodeURIComponent(t.dest.uri)),r.a.createElement(Lr.a,{style:so({},o,{width:"10%",fontSize:"1rem"})},e.renderActions(t.job_id,t.status,t.owner)))),b.push(r.a.createElement(Rr.a,{id:"info_"+t.job_id,class:"rohit",style:{display:"none"}},r.a.createElement(Lr.a,{colSpan:6,style:so({},o,{width:"10%",fontSize:"1rem",backgroundColor:"#e8e8e8",margin:"2%"})},r.a.createElement("div",{id:"infoBox",style:{marginBottom:"0.5%"}},r.a.createElement(_r.a,{position:"static",style:{boxShadow:"unset"}},r.a.createElement(Wr.a,{value:e.state.selectedTab,onChange:e.toggleTabs,style:{backgroundColor:"#e8e8e8"}},r.a.createElement(Vr.a,{style:{backgroundColor:"#428bca",margin:"0.5%",borderRadius:"4px"},label:"Formatted"}),r.a.createElement(Vr.a,{style:{backgroundColor:"#428bca",margin:"0.5%",borderRadius:"4px"},label:"JSON"}))),r.a.createElement("div",{style:{backgroundColor:"white",borderRadius:"4px",textAlign:"left",marginTop:"0.3%"}},e.renderTabContent(t))))))})),r.a.createElement(or.a,{className:m.root,style:{marginLeft:"10%",marginRight:"10%",marginTop:"5%",border:"solid 2px #d9edf7"}},r.a.createElement(Fr.a,{style:{display:"block"}},r.a.createElement(zr.a,{style:{backgroundColor:"#d9edf7"}},r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:so({},o,{width:"7.5%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Username",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:u===y,direction:d,onClick:function(){e.handleRequestSort(y)}},"Username"))),r.a.createElement(Lr.a,{style:so({},o,{width:"40%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Job ID",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:u===p,direction:d,onClick:function(){e.handleRequestSort(p)}},"Job ID"))),r.a.createElement(Lr.a,{style:so({},o,{width:"7.5%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Progress",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:u===f,direction:d,onClick:function(){e.handleRequestSort(f)}},"Progress"))),r.a.createElement(Lr.a,{style:so({},o,{width:"35%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Average Speed",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:u===h,direction:d,onClick:function(){e.handleRequestSort(h)}},"Average Speed"))),r.a.createElement(Lr.a,{style:so({},o,{width:"10%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Source/Destination",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:u===g,direction:d,onClick:function(){e.handleRequestSort(g)}},"Source/Destination"))),r.a.createElement(Lr.a,{style:so({},o,{width:"10%",fontSize:"2rem",color:"#31708f"})},"Actions"))),r.a.createElement(Br.a,{style:{height:"620px",overflowY:"scroll",display:"block"}},b),r.a.createElement(Xr.a,{style:{textAlign:"center"}},r.a.createElement(Rr.a,null,r.a.createElement(Kr.a,{rowsPerPageOptions:l,colSpan:4,count:n,rowsPerPage:s,page:c,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:oo,classes:{caption:m.tablePaginationCaption,select:m.tablePaginationSelect,toolbar:m.toolbar}})))))}}]),t}(a.Component),co=Object(Qr.a)((function(e){return{root:{width:"fit-content"},toolbar:{paddingLeft:"300px"},tablePaginationCaption:{fontSize:"15px"},tablePaginationSelect:{fontSize:"15px",lineHeight:"20px"}}}))(lo),uo=n(288),mo=n.n(uo);function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ho=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).queueFunc=function(){Je(!1,e.state.page,e.state.rowsPerPage,e.state.orderBy,e.state.order,(function(t){var n=[];n=0===e.state.page?t.jobs.slice(0,e.state.rowsPerPage):t.jobs.slice(e.state.rowsPerPage,2*e.state.rowsPerPage),e.setState({response:t.jobs,responsesToDisplay:n,totalCount:t.totalCount})}),(function(e){console.log("Error in queue request to API layer")}))},e.handleChangePage=function(t,n){var a;a=n>e.state.page?e.state.response.slice(e.state.rowsPerPage,2*e.state.rowsPerPage):e.state.response.slice(0,e.state.rowsPerPage),e.setState({page:n,response:e.state.response,responsesToDisplay:a}),e.queueFunc()},e.handleChangeRowsPerPage=function(t){e.setState({page:0,rowsPerPage:parseInt(t.target.value)}),e.queueFunc()},e.handleRequestSort=function(t){var n=t,a="desc";e.state.orderBy===t&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:n}),e.queueFunc()},e.state={response:[],responsesToDisplay:[],selectedTab:0,page:0,rowsPerPage:10,rowsPerPageOptions:[10,20,50,100],order:"desc",orderBy:"job_id"},e.queueFunc(),e.interval=setInterval(e.queueFunc,2e3),e.toggleTabs=e.toggleTabs.bind(Object(pn.a)(e)),e.queueFunc=e.queueFunc.bind(Object(pn.a)(e)),Xt(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Queue"}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"getStatus",value:function(e,t,n){var a={marginTop:"5%",fontWeight:"bold"};if("complete"===e)return r.a.createElement(Ur.a,{now:100,label:"Complete",style:a});if("failed"===e||"removed"===e)return r.a.createElement(Ur.a,{bsStyle:"danger",now:100,style:a,label:"Failed"});var o=Math.ceil(n/t*100);return r.a.createElement(Ur.a,{bsStyle:"danger",now:o,style:a,label:"Processing "+o+"%"})}},{key:"renderSpeed",value:function(e){return e>1e9?(e/1e9).toFixed(2)+" GB/s":e>1e6?(e/1e6).toFixed(2)+" MB/s":e>1e3?(e/1e3).toFixed(2)+" KB/s":e+" B/s"}},{key:"infoButtonOnClick",value:function(e){var t=document.getElementById("info_"+e);if(this.selectedJobInfo===e&&"none"!==t.style.display)t.style.display="none";else{var n=document.getElementById("info_"+this.selectedJobInfo);n&&(n.style.display="none"),t.style.display="table-row",this.selectedJobInfo=e}}},{key:"cancelButtonOnClick",value:function(e){var t=this;!function(e,t,n){pt.apply(this,arguments)}(e,(function(e){t.queueFunc()}),(function(e){console.log("Error in cancel request to API layer")}))}},{key:"restartButtonOnClick",value:function(e){var t=this;!function(e,t,n){ht.apply(this,arguments)}(e,(function(e){t.queueFunc()}),(function(e){var t="Restart job failed since either or both credentials of the job do not exist";console.log(t),di.emit("errorOccured",t)}))}},{key:"deleteButtonOnClick",value:function(e){var t=this;!function(e,t,n){gt.apply(this,arguments)}(e,(function(e){t.queueFunc()}),(function(e){console.log("Error in delete job request to API layer")}))}},{key:"getFormattedDate",value:function(e){return 1+e.getMonth()+"/"+e.getDate()+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"toggleTabs",value:function(){0===this.state.selectedTab?this.setState({selectedTab:1}):this.setState({selectedTab:0})}},{key:"renderActions",value:function(e,t,n){var a=this;return r.a.createElement("div",null,r.a.createElement(E.a,{TransitionComponent:qr.a,placement:"top",title:"Detailed Information"},r.a.createElement(hn.a,{onClick:function(){a.infoButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontFamily:"FontAwesome",fontSize:"1.5rem",height:"30%",fontWeight:"bold",width:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(Gr.a,null))),"processing"===t&&r.a.createElement(E.a,{TransitionComponent:qr.a,title:"Cancel"},r.a.createElement(hn.a,{onClick:function(){a.cancelButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontSize:"1.5rem",fontWeight:"bold",width:"20%",height:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(Yr.a,null))),"processing"!==t&&r.a.createElement(E.a,{TransitionComponent:qr.a,title:"Restart"},r.a.createElement(hn.a,{onClick:function(){a.restartButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontSize:"1.5rem",fontWeight:"bold",width:"20%",height:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(ka.a,null))),"processing"!==t&&!n&&r.a.createElement(E.a,{TransitionComponent:qr.a,title:"Delete"},r.a.createElement(hn.a,{onClick:function(){a.deleteButtonOnClick(e)},variant:"contained",size:"small",color:"primary",style:{backgroundColor:"rgb(224, 224, 224)",color:"#333333",fontSize:"1.5rem",fontWeight:"bold",width:"20%",height:"20%",textTransform:"none",minWidth:"0px",minHeigth:"0px"}},r.a.createElement(mo.a,null))))}},{key:"renderTabContent",value:function(e){var t=new Date(e.times.scheduled),n=new Date(e.times.started),a=new Date(e.times.completed);return 0===this.state.selectedTab?r.a.createElement(Mr.a,{style:{paddingTop:"0.5%",paddingBottom:"0.5%",width:"fit-content"}},r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"User")),r.a.createElement(Dt.a,{md:6},e.owner)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Job ID")),r.a.createElement(Dt.a,{md:6},e.job_id)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Source")),r.a.createElement(Dt.a,{md:6},e.src.uri)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Destination")),r.a.createElement(Dt.a,{md:6},e.dest.uri)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Instant Speed")),r.a.createElement(Dt.a,{md:6},this.renderSpeed(e.bytes.inst))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Average Speed")),r.a.createElement(Dt.a,{md:6},this.renderSpeed(e.bytes.avg))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Scheduled Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(t))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Started Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(n))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Completed Time")),r.a.createElement(Dt.a,{md:6},this.getFormattedDate(a))),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Time Duration")),r.a.createElement(Dt.a,{md:6},((e.times.completed-e.times.started)/1e3).toFixed(2)," sec")),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Attempts")),r.a.createElement(Dt.a,{md:6},e.attempts)),r.a.createElement(It.a,null,r.a.createElement(Dt.a,{md:6},r.a.createElement("b",null,"Status")),r.a.createElement(Dt.a,{md:6},e.status))):1===this.state.selectedTab?r.a.createElement("pre",null,JSON.stringify(e,null,"\t")):void 0}},{key:"render",value:function(){var e=this,t=this.state,n=t.totalCount,a=t.responsesToDisplay,o=this.state,i=o.rowsPerPage,s=o.rowsPerPageOptions,l=o.page,c=o.order,d=o.orderBy,u={textAlign:"center"},m=this.props.classes,p="job_id",f="status",h="bytes.avg",g="src.uri",y=[];return a.map((function(t){y.push(r.a.createElement(Rr.a,{style:{alignSelf:"stretch"}},r.a.createElement(Lr.a,{component:"th",scope:"row",style:fo({},u,{width:"7.5%",fontSize:"1rem"}),align:"center"},t.job_id),r.a.createElement(Lr.a,{style:fo({},u,{width:"45%",fontSize:"1rem"})},e.getStatus(t.status,t.bytes.total,t.bytes.done)),r.a.createElement(Lr.a,{style:fo({},u,{width:"7.5%",fontSize:"1rem"})},e.renderSpeed(t.bytes.avg)),r.a.createElement(Lr.a,{style:fo({},u,{width:"25%",maxWidth:"20vw",overflow:"hidden",fontSize:"1rem",margin:"0px"})},decodeURI(t.src.uri)," ",r.a.createElement("b",null,"->")," ",decodeURI(t.dest.uri)),r.a.createElement(Lr.a,{style:fo({},u,{width:"15%",fontSize:"1rem"})},e.renderActions(t.job_id,t.status,t.deleted)))),y.push(r.a.createElement(Rr.a,{id:"info_"+t.job_id,style:{display:"none"}},r.a.createElement(Lr.a,{colSpan:5,style:fo({},u,{width:"10%",fontSize:"1rem",backgroundColor:"#e8e8e8",margin:"2%"})},r.a.createElement("div",{id:"infoBox",style:{marginBottom:"0.5%"}},r.a.createElement(_r.a,{position:"static",style:{boxShadow:"unset"}},r.a.createElement(Wr.a,{value:e.state.selectedTab,onChange:e.toggleTabs,style:{backgroundColor:"#e8e8e8"}},r.a.createElement(Vr.a,{style:{backgroundColor:"#428bca",margin:"0.5%",borderRadius:"4px"},label:"Formatted"}),r.a.createElement(Vr.a,{style:{backgroundColor:"#428bca",margin:"0.5%",borderRadius:"4px"},label:"JSON"}))),r.a.createElement("div",{style:{backgroundColor:"white",borderRadius:"4px",textAlign:"left",marginTop:"0.3%"}},e.renderTabContent(t))))))})),r.a.createElement(or.a,{className:m.root,id:"jobHistory",style:{marginLeft:"7.2%",marginRight:"7.2%",marginTop:"5%",marginBottom:"10%",border:"solid 2px #d9edf7"}},r.a.createElement(Fr.a,null,r.a.createElement(zr.a,{style:{backgroundColor:"#d9edf7"}},r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:fo({},u,{width:"7.5%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Job ID",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===p,direction:c,onClick:function(){e.handleRequestSort(p)}},"Job ID"))),r.a.createElement(Lr.a,{style:fo({},u,{width:"45%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Progress",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===f,direction:c,onClick:function(){return e.handleRequestSort(f)}},"Progress"))),r.a.createElement(Lr.a,{style:fo({},u,{width:"7.5%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Average Speed",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===h,direction:c,onClick:function(){return e.handleRequestSort(h)}},"Average Speed"))),r.a.createElement(Lr.a,{style:fo({},u,{width:"25%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Source/Destination",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===g,direction:c,onClick:function(){return e.handleRequestSort(g)}},"Source/Destination"))),r.a.createElement(Lr.a,{style:fo({},u,{width:"15%",fontSize:"2rem",color:"#31708f"})},"Actions"))),r.a.createElement(Br.a,null,y),r.a.createElement(Xr.a,{style:{textAlign:"center"}},r.a.createElement(Rr.a,null,r.a.createElement(Kr.a,{rowsPerPageOptions:s,colSpan:3,count:n,rowsPerPage:i,page:l,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:oo,classes:{caption:m.tablePaginationCaption,select:m.tablePaginationSelect,toolbar:m.toolbar}})))))}}]),t}(a.Component),go=Object(Qr.a)((function(e){return{root:{width:"fit-content"},toolbar:{paddingLeft:"300px"},tablePaginationCaption:{fontSize:"15px"},tablePaginationSelect:{fontSize:"15px",lineHeight:"20px"}}}))(ho),yo=n(583),bo=n(584),Eo=n(585),vo=n(512),wo=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).state={isSmall:window.innerWidth<=640,loading:!0,oldPassword:"",newPassword:"",conformNewPassword:"",userEmail:ui.getState().email,userOrganization:"...",fName:"...",lName:"...",redirect:!1,openAlertDialog:!1,saveOAuthTokens:!1},function(e,t,n){ct.apply(this,arguments)}(e.state.userEmail,(function(t){e.setState({userOrganization:t.organization,fName:t.firstName,lName:t.lastName,saveOAuthTokens:t.saveOAuthTokens,loading:!1})}),(function(t){e.setState({loading:!1}),console.log("Error encountered in getUser request to API layer")})),e.getInnerCard=e.getInnerCard.bind(Object(pn.a)(e)),e.onPasswordUpdate=e.onPasswordUpdate.bind(Object(pn.a)(e)),e.accountDetails=e.accountDetails.bind(Object(pn.a)(e)),e.handleAccountPreferenceToggle=e.handleAccountPreferenceToggle.bind(Object(pn.a)(e)),e.handleAlertClose=e.handleAlertClose.bind(Object(pn.a)(e)),e.handleAlertCloseYes=e.handleAlertCloseYes.bind(Object(pn.a)(e)),Xt(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - History",window.addEventListener("resize",this.resize.bind(this)),this.resize()}},{key:"onPasswordUpdate",value:function(e,t,n){var a=this;!function(e,t,n,a,r){mt.apply(this,arguments)}(e,t,n,(function(e){ui.dispatch(function(e){return{type:L,hash:e}}(e)),a.setState({redirect:!0}),console.log(e)}),(function(e){e&&e.response&&e.response.data&&e.response.data.message?di.emit("errorOccured",e.response.data.message):di.emit("errorOccured","Unknown Error")}))}},{key:"handleAccountPreferenceToggle",value:function(){this.setState({openAlertDialog:!0})}},{key:"handleAlertClose",value:function(){this.setState({openAlertDialog:!1})}},{key:"handleAlertCloseYes",value:function(){var e=this;this.handleAlertClose();var t=this.state.saveOAuthTokens;t=!t,function(e,t,n){dt.apply(this,arguments)}(this.state.email,t,(function(){ui.dispatch({type:H,saveOAuthTokens:t}),t&&(Oe.remove(j),Oe.remove(P),ui.dispatch(W("left")),ui.dispatch(W("right"))),e.setState({saveOAuthTokens:t})}))}},{key:"accountDetails",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ja.a,null,r.a.createElement(yo.a,{style:{minWidth:275}},r.a.createElement(bo.a,null,r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.6em"}},"Account Details ",r.a.createElement("br",null)),r.a.createElement(Ya.a,null,r.a.createElement(Xa.a,{classes:{primary:"userDescThemeFont",secondary:"userDescValueFont"},primary:"Email",secondary:this.state.userEmail}),r.a.createElement(Qa.a,null),r.a.createElement(Xa.a,{classes:{primary:"userDescThemeFont",secondary:"userDescValueFont"},primary:"First Name",secondary:this.state.fName}),r.a.createElement(Qa.a,null),r.a.createElement(Xa.a,{classes:{primary:"userDescThemeFont",secondary:"userDescValueFont"},primary:"Last Name",secondary:this.state.lName}),r.a.createElement(Qa.a,null),r.a.createElement(Xa.a,{classes:{primary:"userDescThemeFont",secondary:"userDescValueFont"},primary:"Organization",secondary:this.state.userOrganization}))))),r.a.createElement("br",null),r.a.createElement(Ja.a,null,r.a.createElement(yo.a,{style:{minWidth:275}},r.a.createElement(bo.a,null,r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.6em"}},"Account Preferences ",r.a.createElement("br",null)),r.a.createElement(vo.a,null,r.a.createElement(Sr.a,{value:"new_source",control:r.a.createElement(Pr.a,{checked:this.state.saveOAuthTokens,onClick:function(){return e.handleAccountPreferenceToggle()},value:"saveOAuthTokenSwitch",color:"primary"}),label:"Save OAuth tokens"}))))),r.a.createElement(xa.a,{open:this.state.openAlertDialog,onClose:this.handleAlertClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ia.a,{id:"alert-dialog-title"},"Change how OAuth tokens are saved?"),r.a.createElement(Da.a,null,r.a.createElement(Aa.a,{id:"alert-dialog-description"},"Warning! This might delete all your existing credentials and may interrupt ongoing transfers. Are you sure?")),r.a.createElement(Ta.a,null,r.a.createElement(hn.a,{onClick:this.handleAlertCloseYes,color:"primary"},"Yes"),r.a.createElement(hn.a,{onClick:this.handleAlertClose,color:"primary",autoFocus:!0},"No"))))}},{key:"getInnerCard",value:function(){var e=this,t=function(t){return function(n){e.setState(Object(G.a)({},t,n.target.value))}},n=this.state.newPassword!==this.state.conformNewPassword;return r.a.createElement("div",null,r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.6em"}},"Change your Password"),r.a.createElement(Pa.a,{id:"Email",label:"Enter Your Old Password",type:"password",value:this.state.oldPassword,style:{width:"100%",marginBottom:"1em"},onChange:t("oldPassword")}),r.a.createElement(Pa.a,{id:"Password",label:"Enter Your New Password",type:"password",value:this.state.newPassword,style:{width:"100%",marginBottom:"1em"},onChange:t("newPassword")}),r.a.createElement(Pa.a,{error:n,id:"Cpassword",type:"password",label:"Confirm Your New Password",value:this.state.conformNewPassword,style:{width:"100%",marginBottom:"2em"},onChange:t("conformNewPassword")}),r.a.createElement(Eo.a,{style:{marginBottom:"0px"}},r.a.createElement(hn.a,{size:"small",color:"primary",style:{width:"100%"},onClick:function(){return e.onPasswordUpdate(e.state.oldPassword,e.state.newPassword,e.state.conformNewPassword)}},"Proceed with password Change")))}},{key:"resize",value:function(){this.state.isSmall&&window.innerWidth>640?this.setState({isSmall:!1}):!this.state.isSmall&&window.innerWidth<=640&&this.setState({isSmall:!0})}},{key:"render",value:function(){var e=this.state,t=e.isSmall,n=e.loading,a=e.redirect,o=window.innerHeight+"px";return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"..",height:o}},r.a.createElement("div",{style:{width:"450px",marginTop:"30px",marginLeft:"30px",marginRight:"30px",alignSelf:t?"flex-start":"center"}},n&&r.a.createElement(gn.a,null),this.accountDetails(),t&&this.getInnerCard(),!t&&r.a.createElement(yo.a,null,r.a.createElement(bo.a,{style:{padding:"3em"}},this.getInnerCard())),a&&r.a.createElement(mn.a,{from:"/user",to:"/transfer"})))}}]),t}(a.Component),Oo=n(189),So=n.n(Oo),ko=n(188),Co=n.n(ko),jo=n(289),Po=n.n(jo),xo=n(290),To=n.n(xo);n(498);function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Io=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).getUserInfo=function(){return st("getUsers",e.state.userTblPage,e.state.userTblRowsPerPage,e.state.userTblOrderBy,e.state.userTblOrder,(function(t){e.setState({users:t.users,totalUsersCount:t.totalCount})}),(function(e){console.log("Error encountered in getUsers request to API layer")}))},e.getAdminInfo=function(){return st("getAdministrators",e.state.adminTblPage,e.state.adminTblRowsPerPage,e.state.adminTblOrderBy,e.state.adminTblOrder,(function(t){console.log(t.users.length+"---"),e.setState({admins:t.users,totalAdminsCount:t.totalCount})}),(function(e){console.log("Error encountered in getUsers request to API layer")}))},e.handleClose=function(){e.setState({showIsAdminPopup:!1,adminChangePopupMsg:"",targetUser:"",firstName:"",lastName:""})},e.handleUserTblChangePage=function(t,n){e.setState({userTblPage:n}),e.getUserInfo()},e.handleUserTblChangeRowsPerPage=function(t){e.setState({userTblPage:0,userTblRowsPerPage:parseInt(t.target.value)}),e.getUserInfo()},e.handleUserTblRequestSort=function(t){var n=t,a="desc";e.state.userTblOrderBy===t&&"desc"===e.state.userTblOrder&&(a="asc"),e.setState({userTblOrder:a,userTblOrderBy:n}),e.getUserInfo()},e.handleAdminsTblChangePage=function(t,n){e.setState({adminTblPage:n}),e.getAdminInfo()},e.handleAdminsTblChangeRowsPerPage=function(t){e.setState({adminTblPage:0,adminTblRowsPerPage:parseInt(t.target.value)}),e.getAdminInfo()},e.handleAdminsTblRequestSort=function(t){var n=t,a="desc";e.state.adminTblOrderBy===t&&"desc"===e.state.adminTblOrder&&(a="asc"),e.setState({adminTblOrder:a,adminTblOrderBy:n}),e.getAdminInfo()},e.state={users:[],totalUsersCount:0,admins:[],totalAdminsCount:0,userTblPage:0,userTblRowsPerPage:10,userTblRowsPerPageOptions:[10,20,50,100],userTblOrder:"asc",userTblOrderBy:"email",adminTblPage:0,adminTblRowsPerPage:10,adminTblRowsPerPageOptions:[10,20,50,100],adminTblOrder:"asc",adminTblOrderBy:"email"},e.getUserInfo=e.getUserInfo.bind(Object(pn.a)(e)),e.getAdminInfo=e.getAdminInfo.bind(Object(pn.a)(e)),e.getUserInfo(),e.getAdminInfo(),Xt(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Client Info"}},{key:"updateAdminRights",value:function(e,t){var n="";e.target.checked?(n="Please confirm if "+t.firstName+" "+t.lastName+" must be granted admin privileges.",this.setState({showIsAdminPopup:!0,adminChangePopupMsg:n,targetUser:t.email,isAdmin:!0,firstName:t.firstName,lastName:t.lastName})):(n="Please confirm if admin privileges of "+t.firstName+" "+t.lastName+" must be revoked.",this.setState({showIsAdminPopup:!0,adminChangePopupMsg:n,targetUser:t.email,isAdmin:!1,firstName:t.firstName,lastName:t.lastName}))}},{key:"updateAdminRightsUsingStateInfo",value:function(e,t){var n=this;(function(e,t){return ut.apply(this,arguments)})(e,t).then((function(e){e?di.emit("errorOccured","Admin privileges is "+(n.state.isAdmin?"granted for ":"revoked for ")+n.state.firstName+" "+n.state.lastName):di.emit("errorOccured","Error while updating the user"),st("getUsers",n.state.userTblPage,n.state.userTblRowsPerPage,n.state.userTblOrderBy,n.state.userTblOrder,(function(e){n.setState({users:e.users,showIsAdminPopup:!1,adminChangePopupMsg:"",targetUser:"",firstName:"",lastName:""})}),(function(e){console.log("Error encountered in getUsers request to API layer")}))}))}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.users,a=this.state.admins,o=this.state,i=o.userTblRowsPerPage,s=o.userTblRowsPerPageOptions,l=o.userTblPage,c=o.userTblOrder,d=o.userTblOrderBy,u=o.totalUsersCount,m=this.state,p=m.adminTblRowsPerPage,f=m.adminTblRowsPerPageOptions,h=m.adminTblPage,g=m.adminTblOrder,y=m.adminTblOrderBy,b=m.totalAdminsCount,v={textAlign:"center"},w="email",O="firstName",S="lastName",k="lastActivity",C="registerMoment",j="organization";return r.a.createElement("div",null,r.a.createElement(xa.a,{open:this.state.showIsAdminPopup,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ia.a,{id:"form-dialog-title"},"Confirm"),r.a.createElement(Da.a,{style:{width:"100%"}},r.a.createElement(Aa.a,null,this.state.adminChangePopupMsg)),r.a.createElement(Ta.a,null,r.a.createElement(hn.a,{onClick:function(){return e.updateAdminRightsUsingStateInfo(e.state.targetUser,e.state.isAdmin)},color:"primary"},"Yes"),r.a.createElement(hn.a,{onClick:function(){return e.handleClose()},color:"secondary"},"No"))),r.a.createElement(or.a,{id:"clientsInfo",style:{marginLeft:"5%",marginRight:"5%",marginTop:"5%",marginBottom:"5%",border:"solid 2px #d9edf7"}},r.a.createElement(Fr.a,null,r.a.createElement(zr.a,{style:{backgroundColor:"#d9edf7"}},r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{colSpan:8,style:Ao({},v,{backgroundColor:"#d9edf7",width:"7.5%",fontSize:"2rem",color:"#31708f"})},"Users Information")),r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:Ao({},v,{width:"15%",fontSize:"1.75rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Username",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===w,direction:c,onClick:function(){e.handleUserTblRequestSort(w)}},r.a.createElement(Co.a,null),"Users"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"10%",fontSize:"1.75rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on First Name",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===O,direction:c,onClick:function(){e.handleUserTblRequestSort(O)}},"Name"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"10%",fontSize:"1.75rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Last Name",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===j,direction:c,onClick:function(){e.handleUserTblRequestSort(j)}},"Orgainzation"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"15%",fontSize:"1.75rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Sign Up",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===C,direction:c,onClick:function(){e.handleUserTblRequestSort(C)}},"Sign Up"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"5%",fontSize:"1.75rem",color:"#31708f"})},"Validation"),r.a.createElement(Lr.a,{style:Ao({},v,{width:"15%",fontSize:"1.75rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Last Activity",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:d===k,direction:c,onClick:function(){e.handleUserTblRequestSort(k)}},"Last Activity"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"15%",fontSize:"1.75rem",color:"#31708f"})},"Make Admin"))),r.a.createElement(Br.a,null,n.map((function(t){var n=t.registerMoment;console.log(n);var a=new Date(n),o=new Date(t.lastActivity);return r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:{fontSize:"1rem"}},r.a.createElement(So.a,null),t.email),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},t.firstName+" "+t.lastName),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},t.organization),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},1+a.getMonth()+"/"+a.getDate()+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},t.validated?r.a.createElement(Po.a,{style:{color:"green"}}):r.a.createElement(To.a,{style:{color:"red"}})),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},1+o.getMonth()+"/"+o.getDate()+"/"+o.getFullYear()+" "+a.getHours()+":"+o.getMinutes()),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},r.a.createElement("input",{type:"checkbox",disabled:t.email===ui.getState().email,checked:t.isAdmin,onChange:function(n){return e.updateAdminRights(n,t)}})))}))),r.a.createElement(Xr.a,{style:{textAlign:"center"}},r.a.createElement(Rr.a,null,r.a.createElement(Kr.a,{rowsPerPageOptions:s,colSpan:8,count:u,rowsPerPage:i,page:l,SelectProps:{native:!0},onChangePage:this.handleUserTblChangePage,onChangeRowsPerPage:this.handleUserTblChangeRowsPerPage,ActionsComponent:oo,classes:{caption:t.tablePaginationCaption,select:t.tablePaginationSelect,toolbar:t.toolbar}}))))),r.a.createElement(or.a,{id:"adminsInfo",style:{marginLeft:"10%",marginRight:"10%",marginTop:"2%",marginBottom:"10%",border:"solid 2px #d9edf7"}},r.a.createElement(Fr.a,null,r.a.createElement(zr.a,{style:{backgroundColor:"#d9edf7"}},r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{colSpan:6,style:Ao({},v,{backgroundColor:"#d9edf7",width:"7.5%",fontSize:"2rem",color:"#31708f"})},"Admin Information")),r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:Ao({},v,{width:"33%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Username",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:y===w,direction:g,onClick:function(){e.handleAdminsTblRequestSort(w)}},r.a.createElement(Co.a,null),"Users"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"33%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on First Name",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:y===O,direction:g,onClick:function(){e.handleAdminsTblRequestSort(O)}},"First Name"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"33%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Last Name",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:y===S,direction:g,onClick:function(){e.handleAdminsTblRequestSort(S)}},"Last Name"))),r.a.createElement(Lr.a,{style:Ao({},v,{width:"33%",fontSize:"2rem",color:"#31708f"})},r.a.createElement(E.a,{title:"Sort on Last Activity",placement:"bottom-end",enterDelay:300},r.a.createElement(ca.a,{active:y===k,direction:g,onClick:function(){e.handleAdminsTblRequestSort(k)}},"Last Activity"))))),r.a.createElement(Br.a,null,a.map((function(e){return r.a.createElement(Rr.a,null,r.a.createElement(Lr.a,{style:{fontSize:"1rem"}},r.a.createElement(So.a,null),e.email),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},e.firstName),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},e.lastName),r.a.createElement(Lr.a,{style:Ao({},v,{fontSize:"1rem"})},"TBD"))}))),r.a.createElement(Xr.a,{style:{textAlign:"center"}},r.a.createElement(Rr.a,null,r.a.createElement(Kr.a,{rowsPerPageOptions:f,colSpan:5,count:b,rowsPerPage:p,page:h,SelectProps:{native:!0},onChangePage:this.handleAdminsTblChangePage,onChangeRowsPerPage:this.handleAdminsTblChangeRowsPerPage,ActionsComponent:oo,classes:{caption:t.tablePaginationCaption,select:t.tablePaginationSelect,toolbar:t.toolbar}}))))))}}]),t}(a.Component),No=Object(Qr.a)((function(e){return{root:{width:"fit-content"},toolbar:{paddingLeft:"300px",paddingRight:"300px"},tablePaginationCaption:{fontSize:"15px"},tablePaginationSelect:{fontSize:"15px",lineHeight:"20px"}}}))(Io),Fo=n(586),Bo=n(147),Lo=n(51);function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ro=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState(Object(G.a)({},t.target.name,t.target.value))},e.state={captchaVerified:!1,captchaVerificationValue:null,email:"noemail"===ui.getState().email?"":ui.getState().email},e.captchaRef=null,e.handleSubmit=e.handleSubmit.bind(Object(pn.a)(e)),e.handleChange=e.handleChange.bind(Object(pn.a)(e)),e.handleCaptchaEvent=e.handleCaptchaEvent.bind(Object(pn.a)(e)),Xt(),e.resetCaptcha=e.resetCaptcha.bind(Object(pn.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Support"}},{key:"handleCaptchaEvent",value:function(e){this.setState({captchaVerified:!0,captchaVerificationValue:e})}},{key:"resetCaptcha",value:function(){this.setState({captchaVerified:!1,captchaVerificationValue:null}),this.captchaRef.reset()}},{key:"handleSubmit",value:function(){var e=this;if(this.state.captchaVerified){var t=document.getElementById("progress-bar");t.style.visibility="visible";var n=document.getElementById("msg");!function(e,t,n){Ke.apply(this,arguments)}({name:this.state.name,email:this.state.email,phone:this.state.phone,subject:this.state.subject,description:this.state.description,captchaVerificationValue:this.state.captchaVerificationValue},(function(a){t.style.visibility="hidden",n.style.border="1px solid green",n.style.color="green",n.innerHTML="Support ticket created successfully. Ticket number - "+a,n.style.visibility="visible",e.resetCaptcha()}),(function(a){t.style.visibility="hidden",n.style.border="1px solid red",n.style.color="red",n.innerHTML='There was an error while creating the support ticket. Please try again or email us at <a href="mailto:admin@onedatashare.org">admin@onedatashare.org</a>',n.style.visibility="visible",e.resetCaptcha()}))}else di.emit("errorOccured","Please verify you are not a robot!")}},{key:"render",value:function(){var e=this,t={margin:"2% 5%"},n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{textAlign:"center",display:"inline-block"});return r.a.createElement(yo.a,{style:{margin:"5% 7.2% 10%",border:"solid 2px #d9edf7"}},r.a.createElement(Fo.a,{title:"Report an Issue"}),r.a.createElement(Lo.ValidatorForm,{ref:"support-form",onSubmit:this.handleSubmit},r.a.createElement("div",{style:t},r.a.createElement(Pa.a,{required:!0,label:"Name",name:"name",onChange:this.handleChange,style:{marginRight:"5%",width:"30%"}}),r.a.createElement(Pa.a,{required:!0,label:"Email Address",name:"email",value:this.state.email,onChange:this.handleChange,style:{marginRight:"5%",width:"30%"}})),r.a.createElement("div",{style:t},r.a.createElement(Pa.a,{required:!0,label:"Subject",name:"subject",onChange:this.handleChange,style:{width:"70%"}})),r.a.createElement("div",{style:t},r.a.createElement(Pa.a,{required:!0,multiline:!0,rows:"6",label:"Issue Description",name:"description",onChange:this.handleChange,style:{width:"70%"}})),r.a.createElement("div",{style:n},r.a.createElement(Bo.a,{sitekey:"6LfXVKIUAAAAAICqn4qGgNtf44QqQ-4CEVWiU_u8",onChange:this.handleCaptchaEvent,ref:function(t){return e.captchaRef=t}})),r.a.createElement("div",{id:"progress-bar",style:{marginLeft:"19%",marginRight:"19%",visibility:"hidden"}},r.a.createElement(gn.a,null)),r.a.createElement("div",{style:{marginLeft:"5%",marginRight:"5%",marginTop:"1%",marginBottom:"2%"}},r.a.createElement(hn.a,{type:"submit",size:"medium",variant:"contained",color:"primary",style:{width:"70%"}},"Submit")),r.a.createElement("div",{id:"msg",style:{marginLeft:"19%",marginRight:"19%",marginTop:"2%",marginBottom:"2%",textAlign:"center",paddingTop:"1%",paddingBottom:"1%",visibility:"hidden"}})))}}]),t}(a.Component),Uo=n(292),Mo=n.n(Uo),_o=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={termsData:""},n.readTextFile=function(e){var t=new XMLHttpRequest;t.open("GET",e,!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0===t.status)){var e=t.responseText;n.setState({termsData:e})}},t.send(null)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.readTextFile(Mo.a)}},{key:"render",value:function(){return r.a.createElement("div",{style:{whiteSpace:"pre-wrap",paddingLeft:"15%",paddingRight:"15%",margin:"10px",display:"flex",flex:1,alignItems:"left",textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.termsData}})))}}]),t}(a.Component),Wo=n(293),Vo=n.n(Wo),qo=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={termsData:""},n.readTextFile=function(e){var t=new XMLHttpRequest;t.open("GET",e,!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0===t.status)){var e=t.responseText;n.setState({termsData:e})}},t.send(null)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.readTextFile(Vo.a)}},{key:"render",value:function(){return r.a.createElement("div",{style:{whiteSpace:"pre-wrap",paddingLeft:"15%",paddingRight:"15%",margin:"10px",display:"flex",flex:1,alignItems:"left",textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.termsData}})))}}]),t}(a.Component),Ho=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isLoggedIn:ui.getState().login,admin:ui.getState().admin},n.unsubscribe=ui.subscribe((function(){n.setState({isLoggedIn:ui.getState().login,admin:ui.getState().admin})})),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.admin;return r.a.createElement("div",{className:"App"},r.a.createElement("link",{rel:"stylesheet",type:"text/css",charSet:"UTF-8",href:"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.css"}),r.a.createElement("link",{rel:"stylesheet",type:"text/css",href:"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick-theme.min.css"}),r.a.createElement(xt,{key:t,login:t,email:ui.getState().email}),r.a.createElement("div",{style:{marginTop:"50px",display:"block"}},r.a.createElement(dn.a,null,r.a.createElement(un.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(cn,Object.assign({},e,{store:ui}))}}),r.a.createElement(un.a,{exact:!0,path:"/terms",render:function(){return r.a.createElement(_o,null)}}),r.a.createElement(un.a,{exact:!0,path:"/policy",render:function(){return r.a.createElement(qo,null)}}),r.a.createElement(un.a,{exact:!0,path:"/support",render:function(){return r.a.createElement(Ro,null)}}),t&&r.a.createElement(un.a,{exact:!0,path:"/transfer",render:function(e){return r.a.createElement(Nr,Object.assign({},e,{store:ui}))}}),t&&r.a.createElement(un.a,{exact:!0,path:"/queue",render:function(e){return r.a.createElement(go,e)}}),t&&n&&r.a.createElement(un.a,{exact:!0,path:"/history",render:function(e){return r.a.createElement(co,Object.assign({},e,{store:ui}))}}),t&&n&&r.a.createElement(un.a,{exact:!0,path:"/clientsInfo",render:function(e){return r.a.createElement(No,Object.assign({},e,{store:ui}))}}),t&&r.a.createElement(un.a,{exact:!0,path:"/user",render:function(e){return r.a.createElement(wo,e)}}),t&&r.a.createElement("h1",{to:"/transfer"},"Page Not Found"),!t&&r.a.createElement(un.a,{render:function(){return r.a.createElement(mn.a,{to:"/"})}}))))}}]),t}(a.Component),Go=n(593);function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ko=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={email:"",password:"",emailChecked:!1,error:!1,errorMessage:null,remember:!1,isAuthenticated:!1},n.emailValidated=!1,n.onEmailNextClicked=n.onEmailNextClicked.bind(Object(pn.a)(n)),n.onSignInClicked=n.onSignInClicked.bind(Object(pn.a)(n)),Xt(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.email&&this.setState({email:this.props.email})}},{key:"onEmailNextClicked",value:function(){var e=this,t=this.props.isLoading;t(!0),xe(this.state.email,(function(n){t(!1),e.setState({emailChecked:!0})}),(function(n){t(!1),e.setState({emailChecked:!1,error:!0,errorMessage:"Email not found or server error."})}))}},{key:"onSignInClicked",value:function(){var e=this,t=this.props,n=t.isLoading,a=t.userLoggedIn,r=this.state,o=r.email,i=r.password,s=r.remember;n(!0),a(o,i,s,(function(t){n(!1),console.log("error message",t),e.setState({error:!0,errorMessage:"Wrong password or server error."})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.createAccountPressed,a=t.validateEmailPressed,o=t.forgotPasswordPressed,i=this.state,s=i.emailChecked,l=i.email,c=i.password,d=i.error,u=i.errorMessage,m=i.remember,p=function(t){return function(n){e.setState(Object(G.a)({error:!1,errorMessage:null},t,n.target.value))}};return r.a.createElement("div",null,!s&&r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em",textAlign:"center"}},"Sign In"),r.a.createElement(Er.a,{style:{fontSize:"1em",textAlign:"center"},color:"textSecondary"},"Onedatashare"),r.a.createElement(Lo.ValidatorForm,{ref:"email",onSubmit:this.onEmailNextClicked},r.a.createElement(Lo.TextValidator,{error:d,helperText:u,label:"Email",onChange:p("email"),name:"email",value:l,validators:["required","isEmail"],errorMessages:["Please put email here","Can not understand email format"],style:{width:"90%",margin:"5%"}}),r.a.createElement(Eo.a,{style:v},r.a.createElement(hn.a,{size:"small",color:"primary",onClick:n},"Create Account"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",type:"submit"},"Next")))),s&&r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em"}},"Hey ",l.substring(0,l.indexOf("@")),"!"),r.a.createElement(hn.a,{size:"large",style:{borderRadius:"20px"},variant:"outlined",color:"primary",onClick:function(){return e.setState({emailChecked:!1})}},l),r.a.createElement(Lo.ValidatorForm,{ref:"password",onSubmit:this.onSignInClicked},r.a.createElement(Lo.TextValidator,{error:d,helperText:u,id:"Password",label:"Enter Your Password",onChange:p("password"),type:"password",name:"password",value:c,validators:["required"],errorMessages:["Where is password?"],style:{width:"90%",margin:"5%"}}),r.a.createElement(Sr.a,{control:r.a.createElement(Go.a,{checked:m,value:"remember",onChange:function(t){e.setState({remember:t.target.checked})},color:"primary"}),label:"Remember"}),r.a.createElement(Eo.a,{style:Yo({},v,{marginBottom:"20px"})},r.a.createElement(hn.a,{size:"small",color:"primary",onClick:function(){return o(l)}},"Forgot Password?"),r.a.createElement(hn.a,{size:"small",color:"primary",onClick:function(){return a(l)}},"Lost Validation Email?")),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",type:"submit",style:{width:"100%"}},"Next"))))}}]),t}(a.Component),Xo=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={accounts:n.props.accounts},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.accounts,n=this.props,a=n.useAnotherAccount,o=n.isLoading,i=n.login;0===Object.keys(t).length&&a();return r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em",textAlign:"center"}},"Choose an account"),r.a.createElement(Ja.a,null,Object.keys(t).map((function(n){return r.a.createElement(Ya.a,{key:n,role:void 0,button:!0,onClick:function(){return function(e){i(e)}(n)}},r.a.createElement(Xa.a,{primary:n,secondary:"Signed out"}),r.a.createElement(mr.a,null,r.a.createElement(sr.a,{onClick:function(){return function(n){o(!0),delete t[n],e.setState({accounts:t}),e.props.removedAccount(t)}(n)},"aria-label":"Delete"},r.a.createElement(fr.a,null))))})),r.a.createElement(Qa.a,{style:{marginTop:"30px"}}),r.a.createElement(Ya.a,{key:"Add Another",button:!0,onClick:a},r.a.createElement(Xa.a,{primary:"Use another account"}))))}}]),t}(a.Component),Qo=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={email:e.email,loadVerifyCode:!1,loading:!1},n.next=n.next.bind(Object(pn.a)(n)),Xt(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"next",value:function(){var e=this;this.setState({loading:!0}),function(e){return Ne.apply(this,arguments)}(this.state.email).then((function(t){200===t.data.status?e.setState({loading:!1,loadVerifyCode:!0}):(e.setState({loading:!1,loadVerifyCode:!1}),di.emit("errorOccured",t.data.response))}))}},{key:"render",value:function(){var e,t=this,n=this.props.back,a=this.props,o=this.state.email;return this.state.loadVerifyCode?r.a.createElement(ei,Object.assign({},a,{loadVerifyCode:this.state.loadVerifyCode,email:this.state.email})):r.a.createElement("div",{className:"enter-from-right slide-in"},this.state.loading&&r.a.createElement(gn.a,null),r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em"}},"Find your Stork Account"),r.a.createElement(Pa.a,{id:"Email",label:"Enter Your Email",value:o,style:{width:"100%",marginBottom:"50px",borderRadius:"25px"},onChange:(e="email",function(n){t.setState(Object(G.a)({},e,n.target.value))})}),r.a.createElement(Eo.a,{className:"flexSpaceBetween"},"\n",r.a.createElement(hn.a,{size:"small",variant:"outlined",color:"primary",onClick:n},"Back to Sign in Page"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return t.next()},style:{marginLeft:"4vw"}},"Next")))}}]),t}(a.Component);function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(n,!0).forEach((function(t){Object(G.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ei=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={email:""!==e.email?e.email:"",password:"",cpassword:"",code:"",screen:e.loadVerifyCode?"verifyCode":"registration",verificationError:"",passwordError:"",firstName:"",lastName:"",organization:"",loading:!1,isLostVerifyCode:e.loadVerifyCode,emailError:!1,firstNameError:!1,lastNameError:!1,emailErrorMessage:null,firstNameErrorMessage:null,lastNameErrorMessage:null,captchaVerified:!1,captchaVerificationValue:null,confirmation:!1},n.firstNameValidationMsg="Please Enter Your First Name",n.lastNameValidationMsg="Please Enter Your Last Name",n.emailValidationMsg="Please Enter EmailId",n.captchaRef=null,n.onEmailNextClicked=n.onEmailNextClicked.bind(Object(pn.a)(n)),n.registerAccount=n.registerAccount.bind(Object(pn.a)(n)),n.verifyAccount=n.verifyAccount.bind(Object(pn.a)(n)),n.login=n.login.bind(Object(pn.a)(n)),Xt(),n.handleCaptchaEvent=n.handleCaptchaEvent.bind(Object(pn.a)(n)),n.resetCaptcha=n.resetCaptcha.bind(Object(pn.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"registerAccount",value:function(){var e=this;this.state.captchaVerified?(this.setState({loading:!0}),function(e){return Ct.apply(this,arguments)}({email:this.state.email,firstName:this.state.firstName,lastName:this.state.lastName,organization:this.state.organization,description:this.state.description,captchaVerificationValue:this.state.captchaVerificationValue}).then((function(t){200===t.status?e.setState({screen:"verifyCode",verificationError:"",loading:!1}):302===t.status&&(e.setState({emaildError:"User with same Email ID already exists",verificationError:"User with same Email ID already exists",loading:!1}),di.emit("errorOccured","User with same Email ID already exists")),e.resetCaptcha()}))):di.emit("errorOccured","Please verify you are not a robot!")}},{key:"verifyAccount",value:function(){var e=this.state.email,t=this;(function(e,t){return jt.apply(this,arguments)})(e,this.state.verificationCode).then((function(e){var n=t.state;200===e.status?(n.screen="setPassword",n.code=e.data,t.setState({state:n})):(n.verificationError="Please Enter Valid Verification Code",t.setState({state:n}))}))}},{key:"login",value:function(){var e=this.state.email,t=this.state.password,n=this.state.cpassword,a=this,r=this.state.code,o=a.state;t!==n?(o.passwordError="Password Doesn't Match",a.setState({state:o})):function(e,t,n,a){return Fe.apply(this,arguments)}(e,r,t,n).then((function(e){a.props.history.push("/account/signIn")}))}},{key:"onEmailNextClicked",value:function(){var e=this;xe(this.state.email,(function(t){e.setState({error:!0,errorMessage:"Email is already there on the server."})}),(function(t){e.registerAccount()}))}},{key:"handleCaptchaEvent",value:function(e){this.setState({captchaVerified:!0,captchaVerificationValue:e})}},{key:"resetCaptcha",value:function(){null!==this.captchaRef&&(this.setState({captchaVerified:!1,captchaVerificationValue:null}),this.captchaRef.reset())}},{key:"render",value:function(){var e=this,t=this.props.backToSignin,n=this.state,a=n.emailError,o=n.emailErrorMessage,i=n.email,s=n.firstNameError,l=n.firstNameErrorMessage,c=n.lastNameError,d=n.lastNameErrorMessage,u=n.confirmation,m=r.a.createElement("div",{style:{fontSize:"12px"}},"By checking the box,you agree to the ",r.a.createElement(g.a,{to:"/terms",target:"_blank"},"Terms of service")," and  ",r.a.createElement(g.a,{to:"/policy",target:"_blank"},"Privacy policy"),"."),p=this.props,f=$o({},{margin:"2% 5%"},{textAlign:"center",display:"inline-block"}),h=this.state.screen,y=this.state.loading,b=function(t){return function(n){e.setState(Object(G.a)({emailError:!1,emailErrorMessage:null},t,n.target.value))}};if("validateEmail"===h)return r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Qo,Object.assign({},p,{email:this.state.email})));if("registration"===h){var E={width:"100%",marginBottom:"4%"};return r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement("div",null,y&&r.a.createElement(gn.a,null)),r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em",textAlign:"center"}},"Create Your OneDataShare Account"),r.a.createElement(Lo.ValidatorForm,{ref:"email",onSubmit:this.onEmailNextClicked},r.a.createElement(Lo.TextValidator,{error:a,helperText:o,label:"Email",onChange:b("email"),name:"email",value:i,validators:["required","isEmail"],errorMessages:["Please enter your email address","Can not understand email format"],style:E}),r.a.createElement(Lo.TextValidator,{error:s,helperText:l,label:"FirstName",name:"firstName",value:this.state.firstName,id:"FirstName",validators:["required"],errorMessages:["Please Enter Your First Name"],style:E,onChange:b("firstName")}),r.a.createElement(Lo.TextValidator,{error:c,helperText:d,label:"LastName",name:"lastName",value:this.state.lastName,id:"LastName",validators:["required"],errorMessages:["Please Enter Your Last Name"],style:E,onChange:b("lastName")}),r.a.createElement(Pa.a,{id:"Organization",label:"Organization",value:this.state.organization,style:E,onChange:b("organization")}),r.a.createElement(Sr.a,{control:r.a.createElement(Go.a,{checked:u,value:"ok",onChange:function(t){e.setState({confirmation:!u})},color:"primary"}),label:m}),r.a.createElement("div",{style:f},r.a.createElement(Bo.a,{sitekey:"6LfXVKIUAAAAAICqn4qGgNtf44QqQ-4CEVWiU_u8",onChange:this.handleCaptchaEvent,ref:function(t){return e.captchaRef=t}})),r.a.createElement(Eo.a,{style:$o({},v,{float:"center"})},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:t},"Sign in Instead"),r.a.createElement(hn.a,{size:"medium",variant:"contained",color:"primary",disabled:!u,style:{marginLeft:"4vw"},type:"submit",onClick:this.registerAccount},"Next"))))}return"verifyCode"===h?r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Er.a,{style:{fontSize:"1.1em",margin:"2%",overflowWrap:"break-word"}},"Please check ",this.state.email," for authorization code"),r.a.createElement(Pa.a,{id:"code",label:""===this.state.verificationError?"Enter Verification Code":"Please Enter Valid Verification Code",value:this.state.verificationCode,style:{width:"100%",marginBottom:"50px"},onChange:b("verificationCode"),error:"Please Enter Valid Verification Code"===this.state.verificationError}),r.a.createElement(Eo.a,{style:$o({},v,{float:"right"})},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:function(){e.state.isLostVerifyCode?e.setState({screen:"validateEmail"}):e.setState({screen:"registration"})}},"Back"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",type:"submit",style:{marginLeft:"4vw"},onClick:this.verifyAccount},"Next"))):"setPassword"===h?r.a.createElement("div",{className:"enter-from-right slide-in"},r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em"}},"Code Verified! Please set password for your account"),r.a.createElement(Pa.a,{id:"Password",label:"Password",type:"password",value:this.state.password,style:{width:"100%",marginBottom:"50px"},onChange:b("password")}),r.a.createElement(Pa.a,{id:"Cpassword",type:"password",label:"Password Doesn't Match"===this.state.passwordError?"Password Doesn't Match":"Confirm Password",value:this.state.cpassword,style:{width:"100%",marginBottom:"50px"},onChange:b("cpassword"),error:"Password Doesn't Match"===this.state.passwordError}),r.a.createElement(Eo.a,{style:$o({},v,{float:"right"})},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:function(){e.setState({screen:"verifyCode"})}},"Back"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",style:{marginLeft:"4vw"},onClick:this.login},"Next"))):void 0}}]),t}(a.Component),ti=0,ni=1,ai=2,ri=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).SetPassword=function(){var e=n.state,t=e.confirmedPassword,a=e.password,r=e.code;a===t?function(e,t,n,a,r,o){Ie.apply(this,arguments)}(n.props.email,r,a,t,(function(){n.props.back(),di.emit("errorOccured","Set Password Succeed.")}),(function(){di.emit("errorOccured","Verify Code Failed.")})):di.emit("errorOccured","Password and confirmed password need to be the same.")},n.VerifyCode=function(){!function(e,t,n,a){Ae.apply(this,arguments)}(n.props.email,n.state.code,(function(e){console.log(e),n.setState({state:ai,code:e})}),(function(e){di.emit("errorOccured","Verify Code Failed.")}))},n.SendCode=function(){!function(e,t,n){De.apply(this,arguments)}(n.props.email,(function(){n.setState({state:ni})}),(function(){di.emit("errorOccured","Send Code Failed.")}))},n.state={password:"",confirmedPassword:"",state:ti,code:""},Xt(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.back,a=t.email,o=this.state,i=o.state,s=o.confirmedPassword,l=o.password!==s,c=function(t){return function(n){e.setState(Object(G.a)({},t,n.target.value))}};return r.a.createElement("div",{className:"enter-from-right slide-in"},i===ti&&r.a.createElement("div",null,r.a.createElement(Er.a,{style:{fontSize:"1.6em",marginBottom:"0.4em"}},"Account recovery"),r.a.createElement(hn.a,{size:"small",variant:"outlined",color:"primary",onClick:n,style:{marginBottom:"1em",borderRadius:"25px"}},a),r.a.createElement(Er.a,{style:{fontSize:"1.0em",marginBottom:"0.4em"}},"Get a verification code"),r.a.createElement(Er.a,{style:{fontSize:"0.8em",marginBottom:"0.4em"}},"Onedatashare will send a verification code to ",a),r.a.createElement(Eo.a,{style:v},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:n},"Back to Sign in"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",style:{marginLeft:"4vw"},onClick:this.SendCode},"Next"))),i===ni&&r.a.createElement("div",null,r.a.createElement(Er.a,{style:{fontSize:"0.8em",marginBottom:"0.4em"}},"Verification code is sent to ",a),r.a.createElement(hn.a,{size:"small",variant:"outlined",color:"primary",onClick:this.SendCode,style:{marginBottom:"1em",borderRadius:"22px"}},"Send Again?"),r.a.createElement(Er.a,{style:{fontSize:"1.0em",marginBottom:"0.4em"}},"Input your code here"),r.a.createElement(Pa.a,{style:{width:"100%",marginBottom:"20px"},id:"outlined-email-input",label:"Code",name:"code",margin:"normal",variant:"outlined",onChange:c("code")}),r.a.createElement(Eo.a,{style:v},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:n},"Back to Sign in"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",style:{marginLeft:"4vw"},onClick:this.VerifyCode},"Verify"))),i===ai&&r.a.createElement("div",null,r.a.createElement(Er.a,{style:{fontSize:"1.0em",marginBottom:"0.4em"}},"Code is Verified, Reset your password here:"),r.a.createElement(Pa.a,{style:{width:"100%"},id:"outlined-email-input",label:"Password",name:"code",type:"password",margin:"normal",variant:"outlined",onChange:c("password")}),r.a.createElement(Pa.a,{error:l,style:{width:"100%",marginBottom:"20px"},id:"outlined-email-input",label:"Confirm Password",name:"code",type:"password",margin:"normal",variant:"outlined",onChange:c("confirmedPassword")}),r.a.createElement(Eo.a,{style:v},r.a.createElement(hn.a,{size:"medium",variant:"outlined",color:"primary",onClick:n},"Back to Sign in"),r.a.createElement(hn.a,{size:"large",variant:"contained",color:"primary",style:{marginLeft:"4vw"},disabled:l,onClick:this.SetPassword},"Reset"))))}}]),t}(a.Component),oi=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).unsubscribe=ui.subscribe((function(){n.setState({authenticated:ui.getState().login})}));var a=Oe.get("SavedUsers")||0,o=0===a?{}:JSON.parse(a);return n.newLogin=r.a.createElement(Xo,{accounts:o,login:function(e){var t=JSON.parse(Oe.get("SavedUsers"))[e];n.userLogin(e,t.hash,!1)},removedAccount:function(e){Oe.set("SavedUsers",JSON.stringify(e)),n.setState({loading:!1,accounts:e})},useAnotherAccount:function(){n.setState({signIn:!0})},isLoading:function(e){n.setState({loading:e})}}),n.state={isSmall:window.innerWidth<=640,password:"",loading:!0,accounts:o,authenticated:ui.getState().login,screen:n.newLogin,creatingAccount:!1,loggingAccount:!1,signIn:!1,forgotPasswordPressed:!1,validateEmailPressed:!1},n.getInnerCard=n.getInnerCard.bind(Object(pn.a)(n)),n.userLogin=n.userLogin.bind(Object(pn.a)(n)),n.userSigningIn=n.userSigningIn.bind(Object(pn.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Account",window.addEventListener("resize",this.resize.bind(this)),this.setState({loading:!1}),this.resize()}},{key:"userLogin",value:function(e,t,n,a){this.state.accounts[e]={hash:t},n&&Oe.set("SavedUsers",JSON.stringify(this.state.accounts)),ui.dispatch(function(e,t,n,a){return{type:B,credential:{email:e,hash:t,saveOAuthTokens:a}}}(e,t,0,a))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"resize",value:function(){this.state.isSmall&&window.innerWidth>640?this.setState({isSmall:!1}):!this.state.isSmall&&window.innerWidth<=640&&this.setState({isSmall:!0})}},{key:"userSigningIn",value:function(e,t,n,a){var r=this;!function(e,t,n,a){Be.apply(this,arguments)}(e,t,(function(t){console.log("success account",t),r.userLogin(e,t.hash,n,t.saveOAuthTokens)}),(function(e){a(e)}))}},{key:"getInnerCard",value:function(){var e=this;return r.a.createElement(dn.a,null,r.a.createElement(un.a,{exact:!0,path:"/account",render:function(t){return e.state.screen}}),r.a.createElement(un.a,{exact:!0,path:"/account/register",render:function(t){return r.a.createElement(ei,Object.assign({},t,{create:function(e,t){},backToSignin:function(){console.log("click"),e.setState({loggingAccount:!0})}}))}}),r.a.createElement(un.a,{exact:!0,path:"/account/lostValidationCode",render:function(t){return r.a.createElement(Qo,Object.assign({},t,{email:e.state.email,back:function(){e.setState({loading:!1,loggingAccount:!0,validateEmailPressed:!1})}}))}}),r.a.createElement(un.a,{exact:!0,path:"/account/signIn",render:function(t){return r.a.createElement("div",null,(e.state.forgotPasswordPressed||e.state.validateEmailPressed)&&r.a.createElement(mn.a,{to:"/account"}),r.a.createElement(Ko,{email:e.props.email,isLoading:function(t){e.setState({loading:t})},createAccountPressed:function(){e.setState({loading:!1,createAccount:!0,creatingAccount:!0})},validateEmailPressed:function(t){e.setState({loading:!1,validateEmailPressed:!0,email:t})},forgotPasswordPressed:function(t){e.setState({loading:!1,screen:r.a.createElement(ri,{back:function(){e.setState({loading:!1,screen:e.newLogin,forgotPasswordPressed:!1})},email:t}),forgotPasswordPressed:!0})},userLoggedIn:e.userSigningIn}))}}))}},{key:"render",value:function(){var e=this.state,t=e.isSmall,n=e.loading,a=e.creatingAccount,o=e.loggingAccount,i=e.signIn,s=e.validateEmailPressed,l=window.innerHeight+"px";return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"..",height:l}},r.a.createElement("div",{style:{width:"450px",marginTop:"30px",marginLeft:"30px",marginRight:"30px",alignSelf:t?"flex-start":"center"}},ui.getState().login&&r.a.createElement(mn.a,{to:"/transfer"}),a&&r.a.createElement(mn.a,{to:"/account/register"}),s&&r.a.createElement(mn.a,{to:{pathname:"/account/lostValidationCode"}}),o&&r.a.createElement(mn.a,{to:"/account"}),i&&r.a.createElement(mn.a,{to:"/account/signIn"}),n&&r.a.createElement(gn.a,null),t&&this.getInnerCard(),!t&&r.a.createElement(yo.a,null,r.a.createElement(bo.a,{style:{padding:"3em"}},this.getInnerCard()))))}}]),t}(a.Component),ii=function(e){function t(e){var n;Object(s.a)(this,t);var a=(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.match.params.tag;return n.processOAuth(a),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"processOAuth",value:function(e){if("ExistingCredGoogleDrive"===e)setTimeout((function(){di.emit("errorOccured","Credential for the endpoint already Exists. Please logout from Google Drive and try again.")}),500);else if("ExistingCredDropbox"===e)setTimeout((function(){di.emit("errorOccured","Credential for the endpoint already Exists. Please logout from Dropbox and try again.")}),500);else if("uuid"===e){console.log("User has opted to save auth tokens at ODS servers. UUID received");var t=this.props.location.search,n=decodeURIComponent(t.substring(t.indexOf("=")+1));"dropbox:///","left",{uuid:n}}else{var a=this.props.location.search,r=JSON.parse(decodeURIComponent(a.substring(a.indexOf("=")+1)));"dropbox"===e?(console.log("Dropbox oAuth identifier received"),this.updateLocalCredStore(j,r)):"googledrive"===e?(console.log("Google drive oAuth identifier received"),this.updateLocalCredStore(P,r)):"gridftp"===e&&(console.log("GridFTP oAuth identifier received"),this.updateLocalCredStore("GridFTP",r))}}},{key:"updateLocalCredStore",value:function(e,t){var n=Oe.get(e)||0;if(0!==n){var a=JSON.parse(n),r=t.name.split(":+")[1],o=t.token;a.some((function(e){return e.name===r}))?console.log("Auth token for "+r+" already exists in session."):(a.push({name:r,token:o}),Oe.set(e,JSON.stringify(a)))}else Oe.set(e,JSON.stringify([{name:t.name.split(":+")[1],token:t.token}]))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(mn.a,{to:"/transfer"}),r.a.createElement("h1",null,"Wait a second, You will be redirected."))}}]),t}(a.Component),si=n(64),li=n(600),ci=n(294),di=new(n.n(ci).a),ui=Object(si.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var n=t.credential,a=n.email,r=n.hash,o=n.saveOAuthTokens;return console.log("logging in",a),Oe.set("email",a,{expires:A}),Oe.set("hash",r,{expires:A}),Oe.set("saveOAuthTokens",o,{expires:A}),Object.assign({},e,{login:!0,email:a,hash:r,saveOAuthTokens:o});case R:return console.log("logging out"),Oe.remove("email"),Oe.remove("hash"),Oe.remove("admin"),Oe.remove("endpoint1"),Oe.remove("endpoint2"),Oe.remove("saveOAuthTokens"),Oe.remove(j),Oe.remove(P),window.location.replace("/"),Object.assign({},e,{login:!1,admin:!1,hash:"",email:"noemail",saveOAuthTokens:void 0});case z:return Object.assign({},e,{admin:!0});case M:return"left"===t.side?Object.assign({},e,{endpoint1:we({},e.endpoint1,{loginProgress:t.progress})}):Object.assign({},e,{endpoint2:we({},e.endpoint2,{loginProgress:t.progress})});case V:return"left"===t.side?(console.log(JSON.stringify(we({},e.endpoint1,{},t.endpoint))),Oe.set("endpoint1",JSON.stringify(we({},e.endpoint1,{},t.endpoint),{expires:A})),Object.assign({},e,{endpoint1:we({},e.endpoint1,{},t.endpoint)})):(Oe.set("endpoint2",JSON.stringify(we({},e.endpoint2,{},t.endpoint)),{expires:A}),Object.assign({},e,{endpoint2:we({},e.endpoint2,{},t.endpoint)}));case L:return Oe.remove("hash"),Oe.set("hash",t.hash,{expires:A}),Object.assign({},e,{hash:t.hash});case H:return Oe.set("saveOAuthTokens",t.saveOAuthTokens),Object.assign({},e,{saveOAuthTokens:t.saveOAuthTokens});default:return e}})),mi=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleOpen=function(t){console.log(t),e.setState({open:!0,vertical:"top",horizontal:"center",error:JSON.stringify(t)}),setTimeout(e.handleClose,4e3)},e.handleClose=function(){e.setState({open:!1})},e.state={loaded:!1,open:!1,vertical:"top",horizontal:"center",error:"null"},Kt.a.initialize("UA-147976263-1"),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.title="OneDataShare - Home",this.setState({loaded:!0}),di.on("errorOccured",this.handleOpen)}},{key:"render",value:function(){var e=this.state,t=e.vertical,n=e.horizontal,a=e.error,o=e.open;return r.a.createElement("div",null,r.a.createElement(li.a,{anchorOrigin:{vertical:t,horizontal:n},style:{marginTop:"20px"},open:o,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},action:r.a.createElement(hn.a,{onClick:this.handleClose,color:"secondary",size:"small"},"Close"),message:r.a.createElement("span",{id:"message-id"},a)}),r.a.createElement(dn.a,null,r.a.createElement(un.a,{path:"/account",component:oi}),r.a.createElement(un.a,{path:"/oauth/:tag",component:ii}),r.a.createElement(un.a,{exact:!0,path:"/*/",component:Ho})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pi=n(597);n(505);i.a.render(r.a.createElement(pi.a,null,r.a.createElement(mi,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[328,1,2]]]);
//# sourceMappingURL=main.d6acbe46.chunk.js.map